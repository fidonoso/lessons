<!DOCTYPE html>
<html lang="es" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Resoluci√≥n del Proyecto - Sistema de Autenticaci√≥n con JWT</title>
    
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Prism.js CSS - Tema que funciona con modo oscuro/claro -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/line-numbers/prism-line-numbers.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/toolbar/prism-toolbar.min.css" rel="stylesheet">
    
    <!-- Configuraci√≥n de Tailwind para modo oscuro -->
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        dark: {
                            100: '#111827', // gray-900
                            200: '#1F2937', // gray-800
                            300: '#374151', // gray-700
                            400: '#4B5563', // gray-600
                        }
                    }
                }
            }
        }
    </script>
    
    <!-- Estilos personalizados -->
    <style>
        .section-title {
            @apply text-2xl font-bold mb-4 text-blue-600 dark:text-gray-100;
        }
        .subsection-title {
            @apply text-xl font-semibold mb-3 text-blue-500 dark:text-gray-200;
        }
        .code-block {
            @apply relative bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-800 dark:to-gray-900 border border-gray-200 dark:border-gray-600 rounded-xl shadow-lg my-4 overflow-hidden;
        }
        .code-block::before {
            content: '';
            @apply absolute top-0 left-0 right-0 h-10 bg-gradient-to-r from-gray-200 to-gray-300 dark:from-gray-700 dark:to-gray-600 border-b border-gray-300 dark:border-gray-500 z-10;
        }
        .code-block::after {
            content: '‚ö´ üü° üü¢';
            @apply absolute top-3 left-4 text-xs z-20;
        }
        .code-content {
            @apply pt-16 overflow-x-auto;
            background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);
        }
        .dark .code-content {
            background: linear-gradient(135deg, #1e293b 0%, #0f172a 100%);
        }
        
        /* Integraci√≥n con Prism.js */
        .code-block pre[class*="language-"] {
            @apply m-0 rounded-none bg-transparent;
            padding: 1.5rem 1.5rem 1.5rem 3rem !important;
            margin-top: 0 !important;
        }
        
        .code-block .line-numbers .line-numbers-rows {
            @apply border-r border-gray-300 dark:border-gray-600;
            padding-top: 1.5rem !important;
        }
        
        .code-block.line-numbers pre[class*="language-"] {
            padding-left: 3.8rem !important;
        }
        
        /* Personalizaci√≥n del tema de Prism.js */
        .dark pre[class*="language-"] {
            background: transparent !important;
            color: #e2e8f0 !important;
        }
        
        .dark .token.comment,
        .dark .token.prolog,
        .dark .token.doctype,
        .dark .token.cdata {
            color: #64748b !important;
        }
        
        .dark .token.keyword,
        .dark .token.operator {
            color: #a78bfa !important;
        }
        
        .dark .token.string,
        .dark .token.attr-value {
            color: #34d399 !important;
        }
        
        .dark .token.number {
            color: #fb923c !important;
        }
        
        .dark .token.function {
            color: #60a5fa !important;
        }
        
        /* Estilos para la toolbar de Prism.js */
        .code-toolbar {
            position: relative;
        }
        
        .code-toolbar .toolbar {
            @apply absolute top-3 right-3 z-30;
        }
        
        .code-toolbar .toolbar .toolbar-item {
            @apply inline-block;
        }
        
        .code-toolbar .toolbar .toolbar-item .copy-button,
        .code-toolbar .toolbar .toolbar-item button {
            @apply px-3 py-1 text-xs font-medium bg-blue-500 hover:bg-blue-600 text-white rounded-md transition-all duration-200 cursor-pointer border-none;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif !important;
        }
        
        .code-toolbar .toolbar .toolbar-item .copy-button:hover,
        .code-toolbar .toolbar .toolbar-item button:hover {
            @apply transform scale-105 shadow-lg;
        }
        
        /* Mejoras para n√∫meros de l√≠nea */
        .line-numbers .line-numbers-rows {
            @apply text-gray-400 dark:text-gray-500;
            font-size: 0.85em;
            line-height: 1.5;
            user-select: none;
        }
        
        .line-numbers .line-numbers-rows > span:before {
            @apply text-gray-400 dark:text-gray-500;
        }
        
        /* Ajustes para que el header no interfiera con la toolbar */
        .code-block .code-header {
            @apply absolute top-3 left-16 text-xs text-gray-500 dark:text-gray-400 font-medium z-20;
        }
        .code-header {
            @apply absolute top-3 right-4 text-xs text-gray-500 dark:text-gray-400 font-medium;
        }
        .step-number {
            @apply bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-full w-10 h-10 flex items-center justify-center font-bold text-sm shadow-lg;
        }
        .language-tag {
            @apply inline-block px-3 py-1 text-xs font-semibold bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200 rounded-full mb-3;
        }
        .file-icon {
            @apply inline-block w-4 h-4 mr-2 opacity-70;
        }
        .terminal-block {
            @apply relative bg-gray-900 border border-gray-700 rounded-xl shadow-lg my-4 font-mono text-sm overflow-hidden;
        }
        .terminal-block::before {
            content: '‚óè‚óè‚óè';
            @apply absolute top-3 left-4 text-red-500;
        }
        .terminal-content {
            @apply p-6 pt-12 text-green-400 overflow-x-auto;
        }
        .sql-block {
            @apply relative bg-gradient-to-br from-indigo-50 to-indigo-100 dark:from-indigo-900 dark:to-indigo-800 border border-indigo-200 dark:border-indigo-600 rounded-xl shadow-lg my-4 font-mono text-sm overflow-hidden;
        }
        .sql-content {
            @apply p-6 text-indigo-800 dark:text-indigo-200 overflow-x-auto;
        }
        .json-block {
            @apply relative bg-gradient-to-br from-emerald-50 to-emerald-100 dark:from-emerald-900 dark:to-emerald-800 border border-emerald-200 dark:border-emerald-600 rounded-xl shadow-lg my-4 font-mono text-sm overflow-hidden;
        }
        .json-content {
            @apply p-6 text-emerald-800 dark:text-emerald-200 overflow-x-auto;
        }
        .code-block:hover {
            @apply shadow-xl transform scale-[1.01] transition-all duration-300;
        }
        .syntax-keyword {
            @apply text-purple-600 dark:text-purple-400 font-semibold;
        }
        .syntax-string {
            @apply text-green-600 dark:text-green-400;
        }
        .syntax-comment {
            @apply text-gray-500 dark:text-gray-400 italic;
        }
        .syntax-number {
            @apply text-orange-600 dark:text-orange-400;
        }
        
        /* Efectos de scroll mejorados */
        .code-content::-webkit-scrollbar,
        .terminal-content::-webkit-scrollbar,
        .sql-content::-webkit-scrollbar,
        .json-content::-webkit-scrollbar {
            height: 8px;
        }
        
        .code-content::-webkit-scrollbar-track,
        .terminal-content::-webkit-scrollbar-track,
        .sql-content::-webkit-scrollbar-track,
        .json-content::-webkit-scrollbar-track {
            @apply bg-gray-200 dark:bg-gray-700 rounded-full;
        }
        
        .code-content::-webkit-scrollbar-thumb,
        .terminal-content::-webkit-scrollbar-thumb,
        .sql-content::-webkit-scrollbar-thumb,
        .json-content::-webkit-scrollbar-thumb {
            @apply bg-blue-400 dark:bg-blue-600 rounded-full hover:bg-blue-500 dark:hover:bg-blue-500;
        }
        
        /* Animaciones suaves */
        .code-block,
        .terminal-block,
        .sql-block,
        .json-block {
            transition: all 0.3s ease;
        }
        
        .language-tag {
            animation: fadeInDown 0.5s ease-out;
        }
        
        @keyframes fadeInDown {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        /* Mejoras de responsividad */
        @media (max-width: 768px) {
            .code-content,
            .terminal-content,
            .sql-content,
            .json-content {
                @apply p-4 pt-12 text-xs;
            }
            
            .code-block::after {
                @apply text-xs top-2 left-3;
            }
            
            .terminal-block::before {
                @apply text-xs top-2 left-3;
            }
        }
        
        /* Estilos para resaltar l√≠neas importantes */
        .highlight-line {
            @apply bg-yellow-100 dark:bg-yellow-900/30 -mx-6 px-6;
        }
        
        .error-line {
            @apply bg-red-100 dark:bg-red-900/30 -mx-6 px-6;
        }
        
        .success-line {
            @apply bg-green-100 dark:bg-green-900/30 -mx-6 px-6;
        }
    </style>
</head>
<body class="bg-gray-100 dark:bg-dark-100 dark:text-gray-300 transition-colors duration-200 ">
    <nav id="navbar1" class="bg-gray-50 dark:bg-dark-200 shadow-lg sticky top-0 z-50">
        <div class="container mx-auto px-4">
            <div class="flex justify-between items-center py-4">
                <a href="/lessons/nodejs/guia-jwt" class="text-xl font-bold text-gray-800 dark:text-gray-100">
                    ‚Üê Volver a la Gu√≠a
                </a>
                <div class="flex items-center space-x-6">
                    <span class="font-medium text-gray-700 dark:text-gray-300">Resoluci√≥n del Proyecto</span>
                    <button id="darkModeToggle" class="p-2 rounded-full bg-gray-200 dark:bg-dark-300 hover:bg-gray-300 dark:hover:bg-dark-400 transition-colors duration-200">
                        <svg class="w-6 h-6 text-gray-800 dark:hidden" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"></path>
                        </svg>
                        <svg class="w-6 h-6 hidden dark:block text-yellow-300" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z" clip-rule="evenodd"></path>
                        </svg>
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <div class="container mx-auto px-4 py-8">
        <h1 class="text-4xl font-bold text-center text-blue-700 dark:text-gray-100 mb-8">
            Gu√≠a Paso a Paso: Sistema de Autenticaci√≥n con JWT
        </h1>

        <!-- Introducci√≥n -->
        <section class="bg-gray-50 dark:bg-dark-200 shadow-lg rounded-lg p-6 mb-8">
            <h2 class="section-title">Introducci√≥n</h2>
            <p class="text-gray-700 dark:text-gray-300 mb-4">
                Esta gu√≠a te llevar√° paso a paso para crear un sistema completo de autenticaci√≥n usando JWT (JSON Web Tokens) 
                con Node.js, Express y PostgreSQL, siguiendo la arquitectura MVC.
            </p>
            <div class="bg-blue-50 dark:bg-dark-300 p-4 rounded-lg">
                <h3 class="font-semibold text-blue-700 dark:text-blue-400 mb-2">¬øQu√© aprender√°s?</h3>
                <ul class="list-disc list-inside space-y-1 text-gray-700 dark:text-gray-300">
                    <li>Configurar un proyecto Node.js con Express</li>
                    <li>Implementar autenticaci√≥n segura con JWT</li>
                    <li>Crear y gestionar una base de datos PostgreSQL</li>
                    <li>Desarrollar middleware de autorizaci√≥n</li>
                    <li>Implementar roles de usuario</li>
                </ul>
            </div>
        </section>

        <!-- Paso 1: Estructura del Proyecto -->
        <section class="bg-gray-50 dark:bg-dark-200 shadow-lg rounded-lg p-6 mb-8">
            <div class="flex items-center mb-4">
                <div class="step-number mr-4">1</div>
                <h2 class="section-title mb-0">Estructura del Proyecto</h2>
            </div>
            
            <p class="text-gray-700 dark:text-gray-300 mb-4">
                Primero, creemos la estructura de carpetas que seguir√° el patr√≥n MVC (Modelo-Vista-Controlador).
            </p>

            <h3 class="subsection-title">Estructura de Directorios</h3>
            <div class="language-tag">üìÅ Estructura de Proyecto</div>
            <div class="code-block line-numbers">
                <div class="code-header">auth-system/</div>
                <div class="code-content">
                    <pre><code class="language-text">auth-system/
‚îú‚îÄ‚îÄ config/
‚îÇ   ‚îú‚îÄ‚îÄ database.js          # Configuraci√≥n de la base de datos
‚îÇ   ‚îî‚îÄ‚îÄ auth.js             # Configuraci√≥n de JWT
‚îú‚îÄ‚îÄ controllers/
‚îÇ   ‚îú‚îÄ‚îÄ authController.js    # L√≥gica de autenticaci√≥n
‚îÇ   ‚îî‚îÄ‚îÄ userController.js    # L√≥gica de usuarios
‚îú‚îÄ‚îÄ middleware/
‚îÇ   ‚îú‚îÄ‚îÄ auth.js             # Middleware de autenticaci√≥n
‚îÇ   ‚îî‚îÄ‚îÄ roles.js            # Middleware de roles
‚îú‚îÄ‚îÄ models/
‚îÇ   ‚îî‚îÄ‚îÄ User.js             # Modelo de usuario
‚îú‚îÄ‚îÄ routes/
‚îÇ   ‚îú‚îÄ‚îÄ auth.js             # Rutas de autenticaci√≥n
‚îÇ   ‚îî‚îÄ‚îÄ users.js            # Rutas de usuarios
‚îú‚îÄ‚îÄ views/
‚îÇ   ‚îú‚îÄ‚îÄ index.html          # P√°gina de inicio
‚îÇ   ‚îú‚îÄ‚îÄ login.html          # P√°gina de login
‚îÇ   ‚îú‚îÄ‚îÄ register.html       # P√°gina de registro
‚îÇ   ‚îú‚îÄ‚îÄ dashboard.html      # Dashboard de usuario
‚îÇ   ‚îî‚îÄ‚îÄ admin.html          # Panel de administraci√≥n
‚îú‚îÄ‚îÄ public/
‚îÇ   ‚îú‚îÄ‚îÄ css/
‚îÇ   ‚îú‚îÄ‚îÄ js/
‚îÇ   ‚îî‚îÄ‚îÄ images/
‚îú‚îÄ‚îÄ .env                    # Variables de entorno
‚îú‚îÄ‚îÄ .gitignore             # Archivos ignorados por Git
‚îú‚îÄ‚îÄ package.json           # Dependencias del proyecto
‚îî‚îÄ‚îÄ server.js              # Archivo principal del servidor</code></pre>
                </div>
            </div>

            <h3 class="subsection-title">Comandos para crear la estructura</h3>
            <div class="language-tag">üñ•Ô∏è PowerShell</div>
            <div class="code-block line-numbers">
                <div class="code-header">PowerShell Commands</div>
                <div class="code-content">
                    <pre><code class="language-powershell"># Crear las carpetas principales
New-Item -Path config, controllers, middleware, models, routes, views, public -ItemType Directory

New-Item -Path "public\css", "public\js", "public\images" -ItemType Directory

# Crear archivos principales
New-Item -Path server.js, .env, .gitignore -ItemType File

New-Item -Path "config\database.js", "config\auth.js" -ItemType File

New-Item -Path "controllers\authController.js", "controllers\userController.js" -ItemType File

New-Item -Path "middleware\auth.js", "middleware\roles.js" -ItemType File

New-Item -Path "models\User.js" -ItemType File

New-Item -Path "routes\auth.js", "routes\users.js" -ItemType File

New-Item -Path "views\index.html", "views\login.html", "views\register.html", "views\dashboard.html", "views\admin.html" -ItemType File</code></pre>
                </div>
            </div>

            <div class="bg-yellow-50 dark:bg-dark-300 p-4 rounded-lg mt-4">
                <h4 class="font-semibold text-yellow-700 dark:text-yellow-400 mb-2">üí° Conceptos Clave</h4>
                <ul class="list-disc list-inside space-y-1 text-gray-700 dark:text-gray-300">
                    <li><strong>MVC:</strong> Separa la l√≥gica de negocio (Model), la presentaci√≥n (View) y el control (Controller)</li>
                    <li><strong>Middleware:</strong> Funciones que se ejecutan entre la petici√≥n y la respuesta</li>
                    <li><strong>JWT:</strong> Tokens seguros para mantener sesiones sin estado</li>
                </ul>
            </div>
        </section>

        <!-- Paso 2: Inicializaci√≥n del Proyecto -->
        <section class="bg-gray-50 dark:bg-dark-200 shadow-lg rounded-lg p-6 mb-8">
            <div class="flex items-center mb-4">
                <div class="step-number mr-4">2</div>
                <h2 class="section-title mb-0">Inicializaci√≥n del Proyecto</h2>
            </div>

            <h3 class="subsection-title">Inicializar npm y instalar dependencias</h3>
            <div class="language-tag">üñ•Ô∏è Terminal</div>
            <div class="code-block line-numbers">
                <div class="code-header">Terminal Commands</div>
                <div class="code-content">
                    <pre><code class="language-bash"># Inicializar el proyecto con npm
npm init -y

# Instalar dependencias principales
npm install express jsonwebtoken bcryptjs pg dotenv cors helmet uuid

# Instalar dependencias de desarrollo
npm install --save-dev nodemon</code></pre>
                </div>
            </div>

            <h3 class="subsection-title">Configurar package.json</h3>
            <p class="text-gray-700 dark:text-gray-300 mb-3">
                Agregar los scripts necesarios en el archivo <code class="bg-gray-200 dark:bg-dark-400 px-2 py-1 rounded">package.json</code>:
            </p>
            <div class="language-tag">üìÑ package.json</div>
            <div class="code-block line-numbers">
                <div class="code-header">package.json</div>
                <div class="code-content">
                    <pre><code class="language-json">{
  "name": "auth-system",
  "version": "1.0.0",
  "type": "module",
  "description": "Sistema de autenticaci√≥n con JWT y roles",
  "main": "server.js",
  "scripts": {
    "start": "node server.js",
    "dev": "nodemon server.js",
    "test": "echo \"Error: no test specified\" && exit 1"
  },
  "dependencies": {
    "express": "^4.18.2",
    "jsonwebtoken": "^9.0.2",
    "bcryptjs": "^2.4.3",
    "pg": "^8.11.3",
    "dotenv": "^16.3.1",
    "cors": "^2.8.5",
    "helmet": "^7.0.0",
    "uuid": "^9.0.1"
  },
  "devDependencies": {
    "nodemon": "^3.0.1"
  }
}</code></pre>
                </div>
            </div>

            <div class="bg-green-50 dark:bg-dark-300 p-4 rounded-lg mt-4">
                <h4 class="font-semibold text-green-700 dark:text-green-400 mb-2">üì¶ Dependencias Explicadas</h4>
                <ul class="list-disc list-inside space-y-1 text-gray-700 dark:text-gray-300 text-sm">
                    <li><strong>express:</strong> Framework web para Node.js</li>
                    <li><strong>jsonwebtoken:</strong> Para crear y verificar JWT</li>
                    <li><strong>bcryptjs:</strong> Para hashear contrase√±as</li>
                    <li><strong>pg:</strong> Cliente PostgreSQL para Node.js</li>
                    <li><strong>dotenv:</strong> Para cargar variables de entorno</li>
                    <li><strong>cors:</strong> Para manejar solicitudes entre dominios</li>
                    <li><strong>helmet:</strong> Para agregar headers de seguridad</li>
                    <li><strong>nodemon:</strong> Reinicia autom√°ticamente el servidor en desarrollo</li>
                </ul>
            </div>
        </section>

        <!-- Paso 3: Configuraci√≥n de Variables de Entorno -->
        <section class="bg-gray-50 dark:bg-dark-200 shadow-lg rounded-lg p-6 mb-8">
            <div class="flex items-center mb-4">
                <div class="step-number mr-4">3</div>
                <h2 class="section-title mb-0">Configuraci√≥n de Variables de Entorno</h2>
            </div>

            <p class="text-gray-700 dark:text-gray-300 mb-4">
                Las variables de entorno nos permiten mantener informaci√≥n sensible fuera del c√≥digo fuente.
            </p>
            
            <div class="bg-yellow-50 dark:bg-yellow-900/20 p-4 rounded-lg mb-4">
                <h4 class="font-semibold text-yellow-700 dark:text-yellow-400 mb-2">‚ö†Ô∏è Notas importantes:</h4>
                <ul class="list-disc list-inside space-y-1 text-gray-700 dark:text-gray-300 text-sm">
                    <li>Aseg√∫rate de haber creado la base de datos "auth_system" en PostgreSQL antes de proceder</li>
                    <li>Verifica que el servidor de PostgreSQL est√© corriendo y que sus par√°metros sean correctos</li>
                    <li>Reemplaza "tu_usuario" y "tu_contrase√±a" por las credenciales reales de tu base de datos</li>
                    <li>El valor de JWT_SECRET debe ser una cadena larga y aleatoria para garantizar la seguridad</li>
                    <li>NODE_ENV te permite establecer el entorno de ejecuci√≥n (development, production, etc.)</li>
                </ul>
            </div>

            <h3 class="subsection-title">Archivo .env</h3>
            <div class="language-tag">üìÑ Variables de Entorno</div>
            <div class="code-block line-numbers">
                <div class="code-header">.env</div>
                <div class="code-content">
                    <pre><code class="language-bash"># Puerto del servidor
PORT=3000

# Configuraci√≥n de la base de datos:
# DB_HOST: Direcci√≥n del servidor de la base de datos (usualmente 'localhost' en desarrollo)
# DB_PORT: Puerto de conexi√≥n a PostgreSQL (por defecto es 5432)
# DB_NAME: Nombre de la base de datos que has creado para el proyecto
# DB_USER: Usuario con permisos para acceder a la base de datos
# DB_PASSWORD: Contrase√±a asociada al usuario anterior
DB_HOST=localhost
DB_PORT=5432
DB_NAME=auth_system
DB_USER=tu_usuario
DB_PASSWORD=tu_contrase√±a

# Secreto para JWT:
# Utiliza una clave segura y √∫nica para firmar los tokens de autenticaci√≥n.
JWT_SECRET=tu_jwt_secret_muy_seguro_aqui_123456789
JWT_EXPIRE=24h

# Configuraci√≥n del entorno:
# Define si el entorno es de desarrollo, producci√≥n, etc.
NODE_ENV=development</code></pre>
                </div>
            </div>

            <div class="bg-red-50 dark:bg-red-900/20 p-4 rounded-lg mt-4">
                <h4 class="font-semibold text-red-700 dark:text-red-400 mb-2">üîí Importante sobre Seguridad</h4>
                <ul class="list-disc list-inside space-y-1 text-gray-700 dark:text-gray-300 text-sm">
                    <li>Nunca subas el archivo .env a control de versiones</li>
                    <li>Usa una clave JWT compleja en producci√≥n (m√≠nimo 32 caracteres)</li>
                    <li>Cambia las credenciales por defecto de PostgreSQL</li>
                    <li>Considera usar un servicio de gesti√≥n de secretos en producci√≥n</li>
                </ul>
            </div>
            
            <h3 class="subsection-title">Configurar .gitignore</h3>
            <div class="language-tag">üìÑ Git Ignore</div>
            <div class="code-block line-numbers">
                <div class="code-header">.gitignore</div>
                <div class="code-content">
                    <pre><code class="language-bash"># Dependencias
node_modules/
npm-debug.log*
yarn-debug.log*
yarn-error.log*

# Variables de entorno
.env
.env.local
.env.development.local
.env.test.local
.env.production.local

# Logs
logs
*.log

# Base de datos
*.sqlite
*.db

# IDE
.vscode/
.idea/
*.swp
*.swo

# Sistema operativo
.DS_Store
Thumbs.db</code></pre>
                </div>
            </div>
        </section>

        <!-- Paso 4: Configuraci√≥n de la Base de Datos -->
        <section class="bg-gray-50 dark:bg-dark-200 shadow-lg rounded-lg p-6 mb-8">
            <div class="flex items-center mb-4">
                <div class="step-number mr-4">4</div>
                <h2 class="section-title mb-0">Configuraci√≥n de la Base de Datos</h2>
            </div>

            <h3 class="subsection-title">Instalaci√≥n de PostgreSQL</h3>
            <p class="text-gray-700 dark:text-gray-300 mb-3">
                Si no tienes PostgreSQL instalado, puedes descargarlo desde 
                <a href="https://www.postgresql.org/download/" class="text-blue-600 dark:text-blue-400 hover:underline">postgresql.org</a> 
                o usar Docker:
            </p>
            <div class="language-tag">üê≥ Docker / Sistema</div>
            <div class="code-block line-numbers">
                <div class="code-header">PostgreSQL Installation</div>
                <div class="code-content">
                    <pre><code class="language-bash"># Con Docker
docker run -d --name postgres-auth -e POSTGRES_PASSWORD=tu_contrase√±a -p 5432:5432 postgres

# O instalar directamente en tu sistema operativo
# Windows: Descargar desde postgresql.org
# macOS: brew install postgresql
# Ubuntu: sudo apt-get install postgresql postgresql-contrib</code></pre>
                </div>
            </div>

            <h3 class="subsection-title">Crear la base de datos</h3>
            
            <div class="bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg mb-4">
                <h4 class="font-semibold text-blue-700 dark:text-blue-400 mb-2">üíª Comandos seg√∫n tu Sistema Operativo</h4>
                <ul class="list-disc list-inside space-y-1 text-gray-700 dark:text-gray-300 text-sm">
                    <li><strong>Windows:</strong> Usa PowerShell o Command Prompt</li>
                    <li><strong>Linux/macOS:</strong> Usa Terminal (Bash/Zsh)</li>
                    <li><strong>Docker:</strong> Los comandos son iguales en todos los sistemas</li>
                </ul>
            </div>

            <div class="language-tag">üñ•Ô∏è PowerShell (Windows)</div>
            <div class="code-block line-numbers">
                <div class="code-header">PowerShell - Windows</div>
                <div class="code-content">
                    <pre><code class="language-powershell"># Conectar a PostgreSQL desde PowerShell
psql -h localhost -U postgres -W

# Si tienes postgres en otro puerto: para especificar el puerto (por defecto 5432)
psql -h localhost -p 5433 -U postgres -W</code></pre>
                </div>
            </div>

            <div class="language-tag">üêß Bash (Linux/macOS)</div>
            <div class="code-block line-numbers">
                <div class="code-header">Bash - Linux/macOS</div>
                <div class="code-content">
                    <pre><code class="language-bash"># Conectar a PostgreSQL desde terminal
psql -h localhost -U postgres -W

# Si tienes postgres en otro puerto
psql -h localhost -p 5433 -U postgres -W</code></pre>
                </div>
            </div>

            <p class="text-gray-700 dark:text-gray-300 my-4">
                Una vez conectado a tu instancia de PostgreSQL, debes crear la base de datos "auth_system":
            </p>

            <div class="language-tag">üóÑÔ∏è SQL Commands</div>
            <div class="code-block line-numbers">
                <div class="code-header">PostgreSQL Database Setup</div>
                <div class="code-content">
                    <pre><code class="language-sql">-- Crear la base de datos "auth_system"
CREATE DATABASE auth_system;

-- Opcional: Crear usuario 'auth_user'
CREATE USER auth_user WITH PASSWORD 'tu_contrase√±a';
GRANT ALL PRIVILEGES ON DATABASE auth_system TO auth_user;

-- Conectar a la nueva base de datos
\c auth_system;

-- Crear tabla de usuarios utilizando UUID para el id (se generar√° en la aplicaci√≥n con el paquete npm "uuid")
CREATE TABLE users (
    id VARCHAR(36) PRIMARY KEY,
    email VARCHAR(255) UNIQUE NOT NULL,
    password VARCHAR(255) NOT NULL,
    role VARCHAR(50) DEFAULT 'user',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- Crear √≠ndices para optimizar consultas
CREATE INDEX idx_users_email ON users(email);
CREATE INDEX idx_users_role ON users(role);</code></pre>
                </div>
            </div>

            <h3 class="subsection-title">Configurar conexi√≥n (config/database.js)</h3>
            <div class="language-tag">üìÑ JavaScript (ES6 Module)</div>
            <div class="code-block line-numbers">
                <div class="code-header">config/database.js</div>
                <div class="code-content">
                    <pre><code class="language-javascript">
//config/database.js
import pkg from 'pg';
import dotenv from 'dotenv';

const { Pool } = pkg;
dotenv.config();

const pool = new Pool({
    host: process.env.DB_HOST,
    port: process.env.DB_PORT,
    database: process.env.DB_NAME,
    user: process.env.DB_USER,
    password: process.env.DB_PASSWORD,
});

// Verificar conexi√≥n
pool.on('connect', () => {
    console.log('‚úÖ Conectado a la base de datos PostgreSQL');
});

pool.on('error', (err) => {
    console.error('‚ùå Error en la conexi√≥n a la base de datos:', err);
});

export const query = (text, params) => pool.query(text, params);
export { pool };
export default { query, pool };</code></pre>
                </div>
            </div>
        </section>

        <!-- Paso 5: Configuraci√≥n de Autenticaci√≥n -->
        <section class="bg-gray-50 dark:bg-dark-200 shadow-lg rounded-lg p-6 mb-8">
            <div class="flex items-center mb-4">
                <div class="step-number mr-4">5</div>
                <h2 class="section-title mb-0">Configuraci√≥n de Autenticaci√≥n</h2>
            </div>

            <h3 class="subsection-title">Archivo config/auth.js</h3>
            <div class="language-tag">üìÑ JavaScript (ES6)</div>
            <div class="code-block line-numbers">
                <div class="code-header">config/auth.js</div>
                <div class="code-content">
                    <pre><code class="language-javascript">
//config/auth.js
import dotenv from 'dotenv';

dotenv.config();

export default {
    jwtSecret: process.env.JWT_SECRET,
    jwtExpire: process.env.JWT_EXPIRE || '24h',
    
    // Configuraciones adicionales de seguridad
    bcryptRounds: 12,
    maxLoginAttempts: 5,
    lockoutTime: 15 * 60 * 1000, // 15 minutos
};</code></pre>
                </div>
            </div>
        </section>

        <!-- Paso 6: Modelo de Usuario -->
        <section class="bg-gray-50 dark:bg-dark-200 shadow-lg rounded-lg p-6 mb-8">
            <div class="flex items-center mb-4">
                <div class="step-number mr-4">6</div>
                <h2 class="section-title mb-0">Modelo de Usuario</h2>
            </div>

            <p class="text-gray-700 dark:text-gray-300 mb-4">
                El modelo de usuario maneja toda la l√≥gica relacionada con los datos del usuario, 
                incluyendo creaci√≥n, validaci√≥n y consultas a la base de datos.
            </p>

            <h3 class="subsection-title">Archivo models/User.js</h3>
            <div class="language-tag">üìÑ JavaScript (ES6 Module)</div>
            <div class="code-block line-numbers">
                <div class="code-header">models/User.js</div>
                <div class="code-content">
                    <pre><code class="language-javascript">
//models/User.js
import db from '../config/database.js';
import bcrypt from 'bcryptjs';
import { v4 as uuidv4 } from 'uuid';

class User {
    static async create(userData) {
        const { email, password, role = 'user' } = userData;
        const id = uuidv4(); // Generar UUID para el ID
        
        // Hash de la contrase√±a
        const saltRounds = 12;
        const hashedPassword = await bcrypt.hash(password, saltRounds);
        
        const query = `
            INSERT INTO users (id, email, password, role) 
            VALUES ($1, $2, $3, $4) 
            RETURNING id, email, role, created_at
        `;
        
        const result = await db.query(query, [id, email, hashedPassword, role]);
        return result.rows[0];
    }
    
    static async findByEmail(email) {
        const query = 'SELECT * FROM users WHERE email = $1';
        const result = await db.query(query, [email]);
        return result.rows[0];
    }
    
    static async findById(id) {
        const query = 'SELECT id, email, role, created_at FROM users WHERE id = $1';
        const result = await db.query(query, [id]);
        return result.rows[0];
    }
    
    static async validatePassword(plainPassword, hashedPassword) {
        return await bcrypt.compare(plainPassword, hashedPassword);
    }
    
    static async updateLastLogin(id) {
        const query = 'UPDATE users SET updated_at = CURRENT_TIMESTAMP WHERE id = $1';
        await db.query(query, [id]);
    }
}

export default User;</code></pre>
                </div>
            </div>

            <div class="bg-yellow-50 dark:bg-yellow-900/20 p-4 rounded-lg mt-4">
                <h4 class="font-semibold text-yellow-700 dark:text-yellow-400 mb-2">üì¶ Importante sobre UUID</h4>
                <p class="text-gray-700 dark:text-gray-300 text-sm mb-2">
                    No olvides instalar el paquete uuid para generar IDs √∫nicos:
                </p>
                <div class="bg-gray-900 rounded p-2">
                    <code class="text-green-400 text-sm">npm install uuid</code>
                </div>
            </div>

            <div class="bg-blue-50 dark:bg-dark-300 p-4 rounded-lg mt-4">
                <h4 class="font-semibold text-blue-700 dark:text-blue-400 mb-2">üîë Conceptos de Seguridad</h4>
                <ul class="list-disc list-inside space-y-1 text-gray-700 dark:text-gray-300 text-sm">
                    <li><strong>UUID:</strong> Identificadores √∫nicos que no revelan informaci√≥n sobre los datos</li>
                    <li><strong>Salt Rounds:</strong> 12 rondas proporcionan un balance entre seguridad y rendimiento</li>
                    <li><strong>Hash:</strong> Las contrase√±as nunca se almacenan en texto plano</li>
                    <li><strong>Validaci√≥n:</strong> Comparaci√≥n segura de contrase√±as usando bcrypt</li>
                </ul>
            </div>
        </section>

        <!-- Paso 7: Controlador de Autenticaci√≥n -->
        <section class="bg-gray-50 dark:bg-dark-200 shadow-lg rounded-lg p-6 mb-8">
            <div class="flex items-center mb-4">
                <div class="step-number mr-4">7</div>
                <h2 class="section-title mb-0">Controlador de Autenticaci√≥n</h2>
            </div>

            <p class="text-gray-700 dark:text-gray-300 mb-4">
                Los controladores manejan la l√≥gica de negocio para registro, login y verificaci√≥n de usuarios.
            </p>

            <h3 class="subsection-title">Archivo controllers/authController.js</h3>
            <div class="language-tag">üìÑ JavaScript (ES6 Module)</div>
            <div class="code-block line-numbers">
                <div class="code-header">controllers/authController.js</div>
                <div class="code-content">
                    <pre><code class="language-javascript">
//controllers/authController.js
import jwt from 'jsonwebtoken';
import User from '../models/User.js';
import authConfig from '../config/auth.js';

const authController = {
    // Registro de usuario
    async register(req, res) {
        try {
            const { email, password, confirmPassword } = req.body;
            
            // Validaciones
            if (!email || !password || !confirmPassword) {
                return res.status(400).json({ 
                    message: 'Todos los campos son obligatorios' 
                });
            }
            
            if (password !== confirmPassword) {
                return res.status(400).json({ 
                    message: 'Las contrase√±as no coinciden' 
                });
            }
            
            if (password.length < 8) {
                return res.status(400).json({ 
                    message: 'La contrase√±a debe tener al menos 8 caracteres' 
                });
            }
            
            // Verificar si el usuario ya existe
            const existingUser = await User.findByEmail(email);
            if (existingUser) {
                return res.status(409).json({ 
                    message: 'El usuario ya existe' 
                });
            }
            
            // Crear nuevo usuario
            const newUser = await User.create({ email, password });
            
            // Generar JWT
            const token = jwt.sign(
                { 
                    userId: newUser.id, 
                    email: newUser.email, 
                    role: newUser.role 
                },
                authConfig.jwtSecret,
                { expiresIn: authConfig.jwtExpire }
            );
            
            res.status(201).json({
                message: 'Usuario registrado exitosamente',
                token,
                user: {
                    id: newUser.id,
                    email: newUser.email,
                    role: newUser.role
                }
            });
            
        } catch (error) {
            console.error('Error en registro:', error);
            res.status(500).json({ 
                message: 'Error interno del servidor' 
            });
        }
    },
    
    // Inicio de sesi√≥n
    async login(req, res) {
        try {
            const { email, password } = req.body;
            
            // Validaciones
            if (!email || !password) {
                return res.status(400).json({ 
                    message: 'Email y contrase√±a son obligatorios' 
                });
            }
            
            // Buscar usuario
            const user = await User.findByEmail(email);
            if (!user) {
                return res.status(401).json({ 
                    message: 'Credenciales inv√°lidas' 
                });
            }
            
            // Validar contrase√±a
            const isValidPassword = await User.validatePassword(password, user.password);
            if (!isValidPassword) {
                return res.status(401).json({ 
                    message: 'Credenciales inv√°lidas' 
                });
            }
            
            // Actualizar √∫ltimo login
            await User.updateLastLogin(user.id);
            
            // Generar JWT
            const token = jwt.sign(
                { 
                    userId: user.id, 
                    email: user.email, 
                    role: user.role 
                },
                authConfig.jwtSecret,
                { expiresIn: authConfig.jwtExpire }
            );
            
            res.json({
                message: 'Login exitoso',
                token,
                user: {
                    id: user.id,
                    email: user.email,
                    role: user.role
                }
            });
            
        } catch (error) {
            console.error('Error en login:', error);
            res.status(500).json({ 
                message: 'Error interno del servidor' 
            });
        }
    }
};

export default authController;</code></pre>
                </div>
            </div>
        </section>

        <!-- Paso 8: Middleware de Autenticaci√≥n -->
        <section class="bg-gray-50 dark:bg-dark-200 shadow-lg rounded-lg p-6 mb-8">
            <div class="flex items-center mb-4">
                <div class="step-number mr-4">8</div>
                <h2 class="section-title mb-0">Middleware de Autenticaci√≥n</h2>
            </div>

            <p class="text-gray-700 dark:text-gray-300 mb-4">
                Los middleware se ejecutan antes de los controladores y manejan la verificaci√≥n de tokens y permisos.
            </p>

            <h3 class="subsection-title">Archivo middleware/auth.js</h3>
            <div class="language-tag">üìÑ JavaScript (ES6 Module)</div>
            <div class="code-block line-numbers">
                <div class="code-header">middleware/auth.js</div>
                <div class="code-content">
                    <pre><code class="language-javascript">
//middleware/auth.js
import jwt from 'jsonwebtoken';
import authConfig from '../config/auth.js';

const authMiddleware = (req, res, next) => {
    try {
        // Obtener token del header
        const authHeader = req.headers.authorization;
        
        if (!authHeader) {
            return res.status(401).json({ 
                message: 'Token de acceso requerido' 
            });
        }
        
        const token = authHeader.split(' ')[1]; // Bearer TOKEN
        
        if (!token) {
            return res.status(401).json({ 
                message: 'Formato de token inv√°lido' 
            });
        }
        
        // Verificar token
        const decoded = jwt.verify(token, authConfig.jwtSecret);
        req.user = decoded;
        
        next();
        
    } catch (error) {
        if (error.name === 'TokenExpiredError') {
            return res.status(401).json({ 
                message: 'Token expirado' 
            });
        }
        
        if (error.name === 'JsonWebTokenError') {
            return res.status(401).json({ 
                message: 'Token inv√°lido' 
            });
        }
        
        console.error('Error en middleware de autenticaci√≥n:', error);
        res.status(500).json({ 
            message: 'Error interno del servidor' 
        });
    }
};

export default authMiddleware;</code></pre>
                </div>
            </div>

            <h3 class="subsection-title">Archivo middleware/roles.js</h3>
            <div class="language-tag">üìÑ JavaScript (ES6 Module)</div>
            <div class="code-block line-numbers">
                <div class="code-header">middleware/roles.js</div>
                <div class="code-content">
                    <pre><code class="language-javascript">
//middleware/roles.js
const roleMiddleware = (allowedRoles) => {
    return (req, res, next) => {
        try {
            const userRole = req.user.role;
            
            if (!allowedRoles.includes(userRole)) {
                return res.status(403).json({ 
                    message: 'No tienes permisos para acceder a este recurso' 
                });
            }
            
            next();
            
        } catch (error) {
            console.error('Error en middleware de roles:', error);
            res.status(500).json({ 
                message: 'Error interno del servidor' 
            });
        }
    };
};

export default roleMiddleware;</code></pre>
                </div>
            </div>

            <div class="bg-green-50 dark:bg-dark-300 p-4 rounded-lg mt-4">
                <h4 class="font-semibold text-green-700 dark:text-green-400 mb-2">üõ°Ô∏è Seguridad del Middleware</h4>
                <ul class="list-disc list-inside space-y-1 text-gray-700 dark:text-gray-300 text-sm">
                    <li><strong>Bearer Token:</strong> Est√°ndar para enviar tokens en headers HTTP</li>
                    <li><strong>Verificaci√≥n JWT:</strong> Valida firma y expiraci√≥n autom√°ticamente</li>
                    <li><strong>Control de Roles:</strong> Implementa autorizaci√≥n granular por funcionalidad</li>
                    <li><strong>Manejo de Errores:</strong> Respuestas espec√≠ficas para diferentes tipos de error</li>
                </ul>
            </div>
        </section>

        <!-- Paso 9: Rutas de la Aplicaci√≥n -->
        <section class="bg-gray-50 dark:bg-dark-200 shadow-lg rounded-lg p-6 mb-8">
            <div class="flex items-center mb-4">
                <div class="step-number mr-4">9</div>
                <h2 class="section-title mb-0">Rutas de la Aplicaci√≥n</h2>
            </div>

            <h3 class="subsection-title">Archivo routes/auth.js</h3>
            <div class="language-tag">üìÑ JavaScript (ES6 Module)</div>
            <div class="code-block line-numbers">
                <div class="code-header">routes/auth.js</div>
                <div class="code-content">
                    <pre><code class="language-javascript">
//routes/auth.js
import express from 'express';
import authController from '../controllers/authController.js';
import authMiddleware from '../middleware/auth.js';

const router = express.Router();

// Rutas p√∫blicas
router.post('/register', authController.register);
router.post('/login', authController.login);

// Rutas protegidas
router.get('/verify', authMiddleware, (req, res) => {
    res.json({
        message: 'Token v√°lido',
        user: {
            id: req.user.userId,
            email: req.user.email,
            role: req.user.role
        }
    });
});

export default router;</code></pre>
                </div>
            </div>

            <h3 class="subsection-title">Archivo routes/users.js</h3>
            <div class="language-tag">üìÑ JavaScript (ES6 Module)</div>
            <div class="code-block line-numbers">
                <div class="code-header">routes/users.js</div>
                <div class="code-content">
                    <pre><code class="language-javascript">
//routes/users.js
import express from 'express';
import path from 'path';
import { fileURLToPath } from 'url';
import authMiddleware from '../middleware/auth.js';
import roleMiddleware from '../middleware/roles.js';

// Configurar __dirname para ES Modules
const __filename = fileURLToPath(import.meta.url);
const __dirname = path.dirname(__filename);

const router = express.Router();

// Rutas protegidas para usuarios autenticados
router.get('/dashboard', authMiddleware, (req, res) => {
    res.sendFile(path.join(__dirname, '../views', 'dashboard.html'));
});

// Rutas protegidas solo para administradores
router.get('/admin', 
    authMiddleware, 
    roleMiddleware(['admin']), 
    (req, res) => {
        res.sendFile(path.join(__dirname, '../views', 'admin.html'));
    }
);

export default router;</code></pre>
                </div>
            </div>

            <div class="bg-blue-50 dark:bg-dark-300 p-4 rounded-lg mt-4">
                <h4 class="font-semibold text-blue-700 dark:text-blue-400 mb-2">üõ£Ô∏è Conceptos de Routing</h4>
                <ul class="list-disc list-inside space-y-1 text-gray-700 dark:text-gray-300 text-sm">
                    <li><strong>Router Express:</strong> M√≥dulos que permiten organizar rutas en archivos separados</li>
                    <li><strong>Rutas P√∫blicas:</strong> Accesibles sin autenticaci√≥n (registro, login)</li>
                    <li><strong>Rutas Protegidas:</strong> Requieren autenticaci√≥n v√°lida (dashboard, admin)</li>
                    <li><strong>Middleware Stack:</strong> Se ejecutan en orden: auth ‚Üí roles ‚Üí controlador</li>
                    <li><strong>Separaci√≥n de Responsabilidades:</strong> Rutas de autenticaci√≥n vs. rutas de usuarios</li>
                </ul>
            </div>
        </section>

        <!-- Paso 10: Servidor Principal -->
        <section class="bg-gray-50 dark:bg-dark-200 shadow-lg rounded-lg p-6 mb-8">
            <div class="flex items-center mb-4">
                <div class="step-number mr-4">10</div>
                <h2 class="section-title mb-0">Servidor Principal</h2>
            </div>

            <p class="text-gray-700 dark:text-gray-300 mb-4">
                El archivo server.js es el punto de entrada de la aplicaci√≥n, donde configuramos Express y todas las rutas.
            </p>

            <h3 class="subsection-title">Archivo server.js</h3>
            <div class="language-tag">üìÑ JavaScript (ES6 Module)</div>
            <div class="code-block line-numbers">
                <div class="code-header">server.js</div>
                <div class="code-content">
                    <pre><code class="language-javascript">
//server.js
import express from 'express';
import cors from 'cors';
import helmet from 'helmet';
import path from 'path';
import { fileURLToPath } from 'url';
import dotenv from 'dotenv';

import authRoutes from './routes/auth.js';
import userRoutes from './routes/users.js';

// Configurar __dirname para ES Modules
const __filename = fileURLToPath(import.meta.url);
const __dirname = path.dirname(__filename);

dotenv.config();

const app = express();
const PORT = process.env.PORT || 3000;

// Middleware de seguridad
// Middleware de seguridad
app.use(helmet({
    contentSecurityPolicy: {
        directives: {
            defaultSrc: ["'self'"],
            scriptSrc: ["'self'", "'unsafe-inline'"], // Permite scripts inline
            styleSrc: ["'self'", "'unsafe-inline'"],  // Permite CSS inline
            imgSrc: ["'self'", "data:", "https:"],
        },
    },
}));
app.use(cors());
app.use(express.json());
app.use(express.urlencoded({ extended: true }));

// Servir archivos est√°ticos
app.use(express.static(path.join(__dirname, 'public')));
app.use('/views', express.static(path.join(__dirname, 'views')));

// Rutas
app.use('/api/auth', authRoutes);
app.use('/api/users', userRoutes);

// Ruta principal
app.get('/', (req, res) => {
    res.sendFile(path.join(__dirname, 'views', 'index.html'));
});

// Manejo de errores 404
app.use((req, res, next) => {
    res.status(404).json({ message: 'Ruta no encontrada' });
});

// Manejo de errores global
app.use((err, req, res, next) => {
    console.error(err.stack);
    res.status(500).json({ message: 'Error interno del servidor' });
});

app.listen(PORT, () => {
    console.log(`üöÄ Servidor corriendo en http://localhost:${PORT}`);
});</code></pre>
                </div>
            </div>

            <div class="bg-blue-50 dark:bg-dark-300 p-4 rounded-lg mt-4">
                <h4 class="font-semibold text-blue-700 dark:text-blue-400 mb-2">üöÄ Caracter√≠sticas del Servidor</h4>
                <ul class="list-disc list-inside space-y-1 text-gray-700 dark:text-gray-300 text-sm">
                    <li><strong>ES Modules:</strong> Sintaxis moderna de JavaScript con import/export</li>
                    <li><strong>Middleware de Seguridad:</strong> Helmet para headers seguros</li>
                    <li><strong>CORS:</strong> Permite solicitudes desde diferentes dominios</li>
                    <li><strong>Archivos Est√°ticos:</strong> Servir CSS, JS e im√°genes</li>
                    <li><strong>Manejo de Errores:</strong> Captura y responde a errores globalmente</li>
                </ul>
            </div>
        </section>

        <!-- Paso 11: Comandos de Ejecuci√≥n -->
        <section class="bg-gray-50 dark:bg-dark-200 shadow-lg rounded-lg p-6 mb-8">
            <div class="flex items-center mb-4">
                <div class="step-number mr-4">11</div>
                <h2 class="section-title mb-0">Comandos de Ejecuci√≥n</h2>
            </div>

            <h3 class="subsection-title">Scripts de NPM</h3>
            <div class="language-tag">üñ•Ô∏è Terminal</div>
            <div class="terminal-block">
                <div class="terminal-content">
<pre><span class="syntax-comment"># Instalar todas las dependencias</span>
npm install

<span class="syntax-comment"># Ejecutar en modo desarrollo (con reinicio autom√°tico)</span>
npm run dev

<span class="syntax-comment"># Ejecutar en modo producci√≥n</span>
npm start

<span class="syntax-comment"># Ejecutar tests (cuando se implementen)</span>
npm test</pre>
                </div>
            </div>

            <h3 class="subsection-title">Comandos de Base de Datos</h3>
            <div class="language-tag">üóÑÔ∏è PostgreSQL Commands</div>
            <div class="code-block line-numbers">
                <div class="code-header">PostgreSQL Terminal</div>
                <div class="code-content">
                    <pre><code class="language-sql">
-- Conectar a PostgreSQL
psql -h localhost -U postgres -W

-- Si tienes postgres en otro puerto
psql -h localhost -p 5433 -U postgres -W

-- Crear la base de datos
CREATE DATABASE auth_system;

-- Conectar a la base de datos
\c auth_system;

-- Ver todas las tablas
\dt

-- Ver estructura de la tabla users
\d users;</code></pre>
                </div>
            </div>

            <div class="bg-green-50 dark:bg-dark-300 p-4 rounded-lg mt-4">
                <h4 class="font-semibold text-green-700 dark:text-green-400 mb-2">üí° Comandos √ötiles Adicionales</h4>
                <ul class="list-disc list-inside space-y-1 text-gray-700 dark:text-gray-300 text-sm">
                    <li><strong>Verificar conexi√≥n:</strong> <code class="bg-gray-200 dark:bg-dark-400 px-2 py-1 rounded">SELECT version();</code></li>
                    <li><strong>Ver usuarios:</strong> <code class="bg-gray-200 dark:bg-dark-400 px-2 py-1 rounded">SELECT * FROM users LIMIT 5;</code></li>
                    <li><strong>Salir de psql:</strong> <code class="bg-gray-200 dark:bg-dark-400 px-2 py-1 rounded">\q</code></li>
                    <li><strong>Reiniciar servidor:</strong> <code class="bg-gray-200 dark:bg-dark-400 px-2 py-1 rounded">npm run dev</code> (detecta cambios autom√°ticamente)</li>
                </ul>
            </div>

            <div class="bg-blue-50 dark:bg-dark-300 p-4 rounded-lg mt-4">
                <h4 class="font-semibold text-blue-700 dark:text-blue-400 mb-2">üîß Flujo de Desarrollo</h4>
                <ol class="list-decimal list-inside space-y-1 text-gray-700 dark:text-gray-300 text-sm">
                    <li>Ejecutar <code class="bg-gray-200 dark:bg-dark-400 px-2 py-1 rounded">npm run dev</code> en una terminal</li>
                    <li>Abrir otra terminal para comandos de PostgreSQL si es necesario</li>
                    <li>El servidor se reiniciar√° autom√°ticamente al hacer cambios en el c√≥digo</li>
                    <li>Usar herramientas como Postman o Thunder Client para probar endpoints</li>
                    <li>Verificar logs en la consola para depurar errores</li>
                </ol>
            </div>

            <div class="bg-yellow-50 dark:bg-dark-300 p-4 rounded-lg mt-4">
                <h4 class="font-semibold text-yellow-700 dark:text-yellow-400 mb-2">‚ö†Ô∏è Importante</h4>
                <ul class="list-disc list-inside space-y-1 text-gray-700 dark:text-gray-300 text-sm">
                    <li>Aseg√∫rate de que PostgreSQL est√© ejecut√°ndose antes de iniciar la aplicaci√≥n</li>
                    <li>Verifica que las variables de entorno en .env sean correctas</li>
                    <li>En desarrollo, usa <code>npm run dev</code> para reinicio autom√°tico</li>
                    <li>Para producci√≥n, considera usar PM2 o Docker</li>
                </ul>
            </div>
        </section>

        <!-- Paso 12: P√°ginas HTML Frontend -->
        <section class="bg-gray-50 dark:bg-dark-200 shadow-lg rounded-lg p-6 mb-8">
            <div class="flex items-center mb-4">
                <div class="step-number mr-4">12</div>
                <h2 class="section-title mb-0">P√°ginas HTML Frontend</h2>
            </div>

            <p class="text-gray-700 dark:text-gray-300 mb-4">
                Ahora creamos las p√°ginas HTML b√°sicas para el frontend de la aplicaci√≥n. Estas p√°ginas son simples y funcionales, 
                dise√±adas para probar el sistema de autenticaci√≥n sin estilos complejos.
            </p>

            <h3 class="subsection-title">1. P√°gina de Inicio (views/index.html)</h3>
            <div class="language-tag">üìÑ HTML</div>
            <div class="code-block line-numbers">
                <div class="code-header">views/index.html</div>
                <div class="code-content">
                    <pre><code class="language-html">
<!--<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de Autenticaci√≥n</title>
    <style>
        body { font-family: Arial, sans-serif; max-width: 800px; margin: 0 auto; padding: 20px; }
        .container { text-align: center; }
        .btn { padding: 10px 20px; margin: 10px; text-decoration: none; border: none; cursor: pointer; border-radius: 5px; }
        .btn-primary { background-color: #007bff; color: white; }
        .btn-secondary { background-color: #6c757d; color: white; }
        .btn:hover { opacity: 0.8; }
    </style>
</head>
<body>
    <div class="container">
        <h1>üîê Sistema de Autenticaci√≥n con JWT</h1>
        <p>Bienvenido al sistema de autenticaci√≥n. Por favor, inicia sesi√≥n o reg√≠strate para continuar.</p>
        
        <div id="auth-section">
            <a href="/views/login.html" class="btn btn-primary">Iniciar Sesi√≥n</a>
            <a href="/views/register.html" class="btn btn-secondary">Registrarse</a>
        </div>
        
        <div id="user-section" style="display: none;">
            <h2>¬°Bienvenido de vuelta!</h2>
            <p>Est√°s autenticado como: <span id="user-email"></span></p>
            <p>Tu rol es: <span id="user-role"></span></p>
            <a href="dashboard.html" class="btn btn-primary">Dashboard</a>
            <button onclick="logout()" class="btn btn-secondary">Cerrar Sesi√≥n</button>
        </div>
    </div>

    <script>
        // Verificar si el usuario est√° autenticado
        const authToken = localStorage.getItem('token');
        if (authToken) {
            fetch('/api/auth/verify', {
                headers: {
                    'Authorization': `Bearer ${authToken}`
                }
            })
            .then(response => response.json())
            .then(data => {
                if (data.user) {
                    document.getElementById('auth-section').style.display = 'none';
                    document.getElementById('user-section').style.display = 'block';
                    document.getElementById('user-email').textContent = data.user.email;
                    document.getElementById('user-role').textContent = data.user.role;
                }
            })
            .catch(() => {
                localStorage.removeItem('token');
            });
        }

        function logout() {
            localStorage.removeItem('token');
            window.location.reload();
        }
    </script>
</body>
</html>-->

&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;es&quot;&gt;
&lt;head&gt;
    &lt;meta charset=&quot;UTF-8&quot;&gt;
    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;
    &lt;title&gt;Sistema de Autenticaci&oacute;n&lt;/title&gt;
    &lt;style&gt;
        body { font-family: Arial, sans-serif; max-width: 800px; margin: 0 auto; padding: 20px; }
        .container { text-align: center; }
        .btn { padding: 10px 20px; margin: 10px; text-decoration: none; border: none; cursor: pointer; border-radius: 5px; }
        .btn-primary { background-color: #007bff; color: white; }
        .btn-secondary { background-color: #6c757d; color: white; }
        .btn:hover { opacity: 0.8; }
    &lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;div class=&quot;container&quot;&gt;
        &lt;h1&gt;üîê Sistema de Autenticaci&oacute;n con JWT&lt;/h1&gt;
        &lt;p&gt;Bienvenido al sistema de autenticaci&oacute;n. Por favor, inicia sesi&oacute;n o reg&iacute;strate para continuar.&lt;/p&gt;
        
        &lt;div id=&quot;auth-section&quot;&gt;
            &lt;a href=&quot;/views/login.html&quot; class=&quot;btn btn-primary&quot;&gt;Iniciar Sesi&oacute;n&lt;/a&gt;
            &lt;a href=&quot;/views/register.html&quot; class=&quot;btn btn-secondary&quot;&gt;Registrarse&lt;/a&gt;
        &lt;/div&gt;
        
        &lt;div id=&quot;user-section&quot; style=&quot;display: none;&quot;&gt;
            &lt;h2&gt;&iexcl;Bienvenido de vuelta!&lt;/h2&gt;
            &lt;p&gt;Est&aacute;s autenticado como: &lt;span id=&quot;user-email&quot;&gt;&lt;/span&gt;&lt;/p&gt;
            &lt;p&gt;Tu rol es: &lt;span id=&quot;user-role&quot;&gt;&lt;/span&gt;&lt;/p&gt;
            &lt;a href=&quot;dashboard.html&quot; class=&quot;btn btn-primary&quot;&gt;Dashboard&lt;/a&gt;
            &lt;button onclick=&quot;logout()&quot; class=&quot;btn btn-secondary&quot;&gt;Cerrar Sesi&oacute;n&lt;/button&gt;
        &lt;/div&gt;
    &lt;/div&gt;

    &lt;script&gt;
        // Verificar si el usuario est&aacute; autenticado
        const authToken = localStorage.getItem('token');
        if (authToken) {
            fetch('/api/auth/verify', {
                headers: {
                    'Authorization': `Bearer ${authToken}`
                }
            })
            .then(response =&gt; response.json())
            .then(data =&gt; {
                if (data.user) {
                    document.getElementById('auth-section').style.display = 'none';
                    document.getElementById('user-section').style.display = 'block';
                    document.getElementById('user-email').textContent = data.user.email;
                    document.getElementById('user-role').textContent = data.user.role;
                }
            })
            .catch(() =&gt; {
                localStorage.removeItem('token');
            });
        }

        function logout() {
            localStorage.removeItem('token');
            window.location.reload();
        }
    &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>
                </div>
            </div>

            <h3 class="subsection-title">2. P√°gina de Login (views/login.html)</h3>
            <div class="language-tag">üìÑ HTML</div>
            <div class="code-block line-numbers">
                <div class="code-header">views/login.html</div>
                <div class="code-content">
                    <pre><code class="language-html">

<!--<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Iniciar Sesi√≥n</title>
    <style>
        body { font-family: Arial, sans-serif; max-width: 400px; margin: 50px auto; padding: 20px; }
        .form-group { margin-bottom: 15px; }
        label { display: block; margin-bottom: 5px; font-weight: bold; }
        input { width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 5px; box-sizing: border-box; }
        .btn { width: 100%; padding: 10px; background-color: #007bff; color: white; border: none; border-radius: 5px; cursor: pointer; margin-top: 10px; }
        .btn:hover { background-color: #0056b3; }
        .error { color: red; margin-top: 10px; }
        .success { color: green; margin-top: 10px; }
        .links { text-align: center; margin-top: 20px; }
        .links a { color: #007bff; text-decoration: none; margin: 0 10px; }
    </style>
</head>
<body>
    <h1>üîë Iniciar Sesi√≥n</h1>
    
    <form id="loginForm">
        <div class="form-group">
            <label for="email">Email:</label>
            <input type="email" id="email" name="email" required>
        </div>
        
        <div class="form-group">
            <label for="password">Contrase√±a:</label>
            <input type="password" id="password" name="password" required>
        </div>
        
        <button type="submit" class="btn">Iniciar Sesi√≥n</button>
    </form>
    
    <div id="message"></div>
    
    <div class="links">
        <a href="register.html">¬øNo tienes cuenta? Reg√≠strate</a>
        <a href="index.html">Volver al inicio</a>
    </div>

    <script>
        document.getElementById('loginForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            
            const email = document.getElementById('email').value;
            const password = document.getElementById('password').value;
            const messageDiv = document.getElementById('message');
            
            try {
                const response = await fetch('/api/auth/login', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ email, password })
                });
                
                const data = await response.json();
                
                if (response.ok) {
                    localStorage.setItem('token', data.token);
                    messageDiv.innerHTML = '<div class="success">¬°Login exitoso! Redirigiendo...</div>';
                    setTimeout(() => {
                        window.location.href = 'dashboard.html';
                    }, 1500);
                } else {
                    messageDiv.innerHTML = `<div class="error">${data.message}</div>`;
                }
            } catch (error) {
                messageDiv.innerHTML = '<div class="error">Error de conexi√≥n. Verifica que el servidor est√© ejecut√°ndose.</div>';
            }
        });
    </script>
</body>
</html>-->
&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;es&quot;&gt;
&lt;head&gt;
    &lt;meta charset=&quot;UTF-8&quot;&gt;
    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;
    &lt;title&gt;Iniciar Sesi&oacute;n&lt;/title&gt;
    &lt;style&gt;
        body { font-family: Arial, sans-serif; max-width: 400px; margin: 50px auto; padding: 20px; }
        .form-group { margin-bottom: 15px; }
        label { display: block; margin-bottom: 5px; font-weight: bold; }
        input { width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 5px; box-sizing: border-box; }
        .btn { width: 100%; padding: 10px; background-color: #007bff; color: white; border: none; border-radius: 5px; cursor: pointer; margin-top: 10px; }
        .btn:hover { background-color: #0056b3; }
        .error { color: red; margin-top: 10px; }
        .success { color: green; margin-top: 10px; }
        .links { text-align: center; margin-top: 20px; }
        .links a { color: #007bff; text-decoration: none; margin: 0 10px; }
    &lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;h1&gt;üîë Iniciar Sesi&oacute;n&lt;/h1&gt;
    
    &lt;form id=&quot;loginForm&quot;&gt;
        &lt;div class=&quot;form-group&quot;&gt;
            &lt;label for=&quot;email&quot;&gt;Email:&lt;/label&gt;
            &lt;input type=&quot;email&quot; id=&quot;email&quot; name=&quot;email&quot; required&gt;
        &lt;/div&gt;
        
        &lt;div class=&quot;form-group&quot;&gt;
            &lt;label for=&quot;password&quot;&gt;Contrase&ntilde;a:&lt;/label&gt;
            &lt;input type=&quot;password&quot; id=&quot;password&quot; name=&quot;password&quot; required&gt;
        &lt;/div&gt;
        
        &lt;button type=&quot;submit&quot; class=&quot;btn&quot;&gt;Iniciar Sesi&oacute;n&lt;/button&gt;
    &lt;/form&gt;
    
    &lt;div id=&quot;message&quot;&gt;&lt;/div&gt;
    
    &lt;div class=&quot;links&quot;&gt;
        &lt;a href=&quot;register.html&quot;&gt;&iquest;No tienes cuenta? Reg&iacute;strate&lt;/a&gt;
        &lt;a href=&quot;index.html&quot;&gt;Volver al inicio&lt;/a&gt;
    &lt;/div&gt;

    &lt;script&gt;
        document.getElementById('loginForm').addEventListener('submit', async (e) =&gt; {
            e.preventDefault();
            
            const email = document.getElementById('email').value;
            const password = document.getElementById('password').value;
            const messageDiv = document.getElementById('message');
            
            try {
                const response = await fetch('/api/auth/login', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ email, password })
                });
                
                const data = await response.json();
                
                if (response.ok) {
                    localStorage.setItem('token', data.token);
                    messageDiv.innerHTML = '&lt;div class=&quot;success&quot;&gt;&iexcl;Login exitoso! Redirigiendo...&lt;/div&gt;';
                    setTimeout(() =&gt; {
                        window.location.href = 'dashboard.html';
                    }, 1500);
                } else {
                    messageDiv.innerHTML = `&lt;div class=&quot;error&quot;&gt;${data.message}&lt;/div&gt;`;
                }
            } catch (error) {
                messageDiv.innerHTML = '&lt;div class=&quot;error&quot;&gt;Error de conexi&oacute;n. Verifica que el servidor est&eacute; ejecut&aacute;ndose.&lt;/div&gt;';
            }
        });
    &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>
                </div>
            </div>

            <h3 class="subsection-title">3. P√°gina de Registro (views/register.html)</h3>
            <div class="language-tag">üìÑ HTML</div>
            <div class="code-block line-numbers">
                <div class="code-header">views/register.html</div>
                <div class="code-content">
                    <pre><code class="language-html">
<!--<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Registro</title>
    <style>
        body { font-family: Arial, sans-serif; max-width: 400px; margin: 50px auto; padding: 20px; }
        .form-group { margin-bottom: 15px; }
        label { display: block; margin-bottom: 5px; font-weight: bold; }
        input { width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 5px; box-sizing: border-box; }
        .btn { width: 100%; padding: 10px; background-color: #28a745; color: white; border: none; border-radius: 5px; cursor: pointer; margin-top: 10px; }
        .btn:hover { background-color: #218838; }
        .error { color: red; margin-top: 10px; }
        .success { color: green; margin-top: 10px; }
        .links { text-align: center; margin-top: 20px; }
        .links a { color: #007bff; text-decoration: none; margin: 0 10px; }
        .password-requirements { font-size: 12px; color: #666; margin-top: 5px; }
    </style>
</head>
<body>
    <h1>üìù Registro de Usuario</h1>
    
    <form id="registerForm">
        <div class="form-group">
            <label for="email">Email:</label>
            <input type="email" id="email" name="email" required>
        </div>
        
        <div class="form-group">
            <label for="password">Contrase√±a:</label>
            <input type="password" id="password" name="password" required minlength="8">
            <div class="password-requirements">M√≠nimo 8 caracteres</div>
        </div>
        
        <div class="form-group">
            <label for="confirmPassword">Confirmar Contrase√±a:</label>
            <input type="password" id="confirmPassword" name="confirmPassword" required>
        </div>
        
        <button type="submit" class="btn">Registrarse</button>
    </form>
    
    <div id="message"></div>
    
    <div class="links">
        <a href="login.html">¬øYa tienes cuenta? Inicia sesi√≥n</a>
        <a href="index.html">Volver al inicio</a>
    </div>

    <script>
        document.getElementById('registerForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            
            const email = document.getElementById('email').value;
            const password = document.getElementById('password').value;
            const confirmPassword = document.getElementById('confirmPassword').value;
            const messageDiv = document.getElementById('message');
            
            // Validar que las contrase√±as coincidan
            if (password !== confirmPassword) {
                messageDiv.innerHTML = '<div class="error">Las contrase√±as no coinciden</div>';
                return;
            }
            
            try {
                const response = await fetch('/api/auth/register', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ email, password, confirmPassword })
                });
                
                const data = await response.json();
                
                if (response.ok) {
                    localStorage.setItem('token', data.token);
                    messageDiv.innerHTML = '<div class="success">¬°Registro exitoso! Redirigiendo...</div>';
                    setTimeout(() => {
                        window.location.href = 'dashboard.html';
                    }, 1500);
                } else {
                    messageDiv.innerHTML = `<div class="error">${data.message}</div>`;
                }
            } catch (error) {
                messageDiv.innerHTML = '<div class="error">Error de conexi√≥n. Verifica que el servidor est√© ejecut√°ndose.</div>';
            }
        });
    </script>
</body>
</html>-->
&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;es&quot;&gt;
&lt;head&gt;
    &lt;meta charset=&quot;UTF-8&quot;&gt;
    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;
    &lt;title&gt;Registro&lt;/title&gt;
    &lt;style&gt;
        body { font-family: Arial, sans-serif; max-width: 400px; margin: 50px auto; padding: 20px; }
        .form-group { margin-bottom: 15px; }
        label { display: block; margin-bottom: 5px; font-weight: bold; }
        input { width: 100%; padding: 10px; border: 1px solid #ddd; border-radius: 5px; box-sizing: border-box; }
        .btn { width: 100%; padding: 10px; background-color: #28a745; color: white; border: none; border-radius: 5px; cursor: pointer; margin-top: 10px; }
        .btn:hover { background-color: #218838; }
        .error { color: red; margin-top: 10px; }
        .success { color: green; margin-top: 10px; }
        .links { text-align: center; margin-top: 20px; }
        .links a { color: #007bff; text-decoration: none; margin: 0 10px; }
        .password-requirements { font-size: 12px; color: #666; margin-top: 5px; }
    &lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;h1&gt;üìù Registro de Usuario&lt;/h1&gt;
    
    &lt;form id=&quot;registerForm&quot;&gt;
        &lt;div class=&quot;form-group&quot;&gt;
            &lt;label for=&quot;email&quot;&gt;Email:&lt;/label&gt;
            &lt;input type=&quot;email&quot; id=&quot;email&quot; name=&quot;email&quot; required&gt;
        &lt;/div&gt;
        
        &lt;div class=&quot;form-group&quot;&gt;
            &lt;label for=&quot;password&quot;&gt;Contrase&ntilde;a:&lt;/label&gt;
            &lt;input type=&quot;password&quot; id=&quot;password&quot; name=&quot;password&quot; required minlength=&quot;8&quot;&gt;
            &lt;div class=&quot;password-requirements&quot;&gt;M&iacute;nimo 8 caracteres&lt;/div&gt;
        &lt;/div&gt;
        
        &lt;div class=&quot;form-group&quot;&gt;
            &lt;label for=&quot;confirmPassword&quot;&gt;Confirmar Contrase&ntilde;a:&lt;/label&gt;
            &lt;input type=&quot;password&quot; id=&quot;confirmPassword&quot; name=&quot;confirmPassword&quot; required&gt;
        &lt;/div&gt;
        
        &lt;button type=&quot;submit&quot; class=&quot;btn&quot;&gt;Registrarse&lt;/button&gt;
    &lt;/form&gt;
    
    &lt;div id=&quot;message&quot;&gt;&lt;/div&gt;
    
    &lt;div class=&quot;links&quot;&gt;
        &lt;a href=&quot;login.html&quot;&gt;&iquest;Ya tienes cuenta? Inicia sesi&oacute;n&lt;/a&gt;
        &lt;a href=&quot;index.html&quot;&gt;Volver al inicio&lt;/a&gt;
    &lt;/div&gt;

    &lt;script&gt;
        document.getElementById('registerForm').addEventListener('submit', async (e) =&gt; {
            e.preventDefault();
            
            const email = document.getElementById('email').value;
            const password = document.getElementById('password').value;
            const confirmPassword = document.getElementById('confirmPassword').value;
            const messageDiv = document.getElementById('message');
            
            // Validar que las contrase&ntilde;as coincidan
            if (password !== confirmPassword) {
                messageDiv.innerHTML = '&lt;div class=&quot;error&quot;&gt;Las contrase&ntilde;as no coinciden&lt;/div&gt;';
                return;
            }
            
            try {
                const response = await fetch('/api/auth/register', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({ email, password, confirmPassword })
                });
                
                const data = await response.json();
                
                if (response.ok) {
                    localStorage.setItem('token', data.token);
                    messageDiv.innerHTML = '&lt;div class=&quot;success&quot;&gt;&iexcl;Registro exitoso! Redirigiendo...&lt;/div&gt;';
                    setTimeout(() =&gt; {
                        window.location.href = 'dashboard.html';
                    }, 1500);
                } else {
                    messageDiv.innerHTML = `&lt;div class=&quot;error&quot;&gt;${data.message}&lt;/div&gt;`;
                }
            } catch (error) {
                messageDiv.innerHTML = '&lt;div class=&quot;error&quot;&gt;Error de conexi&oacute;n. Verifica que el servidor est&eacute; ejecut&aacute;ndose.&lt;/div&gt;';
            }
        });
    &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>
                </div>
            </div>

            <h3 class="subsection-title">4. Dashboard de Usuario (views/dashboard.html)</h3>
            <div class="language-tag">üìÑ HTML</div>
            <div class="code-block line-numbers">
                <div class="code-header">views/dashboard.html</div>
                <div class="code-content">
                    <pre><code class="language-html">
<!--<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard</title>
    <style>
        body { font-family: Arial, sans-serif; max-width: 800px; margin: 0 auto; padding: 20px; }
        .header { background-color: #f8f9fa; padding: 20px; border-radius: 8px; margin-bottom: 20px; }
        .user-info { background-color: #e3f2fd; padding: 15px; border-radius: 5px; margin-bottom: 20px; }
        .btn { padding: 10px 15px; margin: 5px; text-decoration: none; border: none; cursor: pointer; border-radius: 5px; }
        .btn-primary { background-color: #007bff; color: white; }
        .btn-success { background-color: #28a745; color: white; }
        .btn-warning { background-color: #ffc107; color: black; }
        .btn-danger { background-color: #dc3545; color: white; }
        .btn:hover { opacity: 0.8; }
        .actions { margin-top: 20px; }
        .protected-content { background-color: #d4edda; padding: 15px; border-radius: 5px; margin: 10px 0; }
    </style>
</head>
<body>
    <div class="header">
        <h1>üìä Dashboard del Usuario</h1>
        <p>Panel de control para usuarios autenticados</p>
    </div>
    
    <div class="user-info">
        <h3>Informaci√≥n del Usuario</h3>
        <p><strong>Email:</strong> <span id="user-email">Cargando...</span></p>
        <p><strong>Rol:</strong> <span id="user-role">Cargando...</span></p>
        <p><strong>ID:</strong> <span id="user-id">Cargando...</span></p>
    </div>
    
    <div class="protected-content">
        <h3>üîí Contenido Protegido</h3>
        <p>Este contenido solo es visible para usuarios autenticados.</p>
        <p>Tu token JWT est√° activo y es v√°lido.</p>
    </div>
    
    <div class="actions">
        <h3>Acciones Disponibles</h3>
        <button onclick="testAuthEndpoint()" class="btn btn-primary">Verificar Token</button>
        <button id="admin-btn" onclick="goToAdmin()" class="btn btn-success" style="display: none;">Panel de Admin</button>
        <a href="index.html" class="btn btn-warning">Volver al Inicio</a>
        <button onclick="logout()" class="btn btn-danger">Cerrar Sesi√≥n</button>
    </div>
    
    <div id="test-results" style="margin-top: 20px;"></div>

    <script>
        // Verificar autenticaci√≥n al cargar la p√°gina
        const userToken = localStorage.getItem('token');
        if (!userToken) {
            alert('No est√°s autenticado. Redirigiendo al login...');
            window.location.href = 'login.html';
        }

        // Cargar informaci√≥n del usuario
        async function loadUserInfo() {
            try {
                const response = await fetch('/api/auth/verify', {
                    headers: {
                        'Authorization': `Bearer ${userToken}`
                    }
                });
                
                const data = await response.json();
                
                if (response.ok && data.user) {
                    document.getElementById('user-email').textContent = data.user.email;
                    document.getElementById('user-role').textContent = data.user.role;
                    document.getElementById('user-id').textContent = data.user.id;
                    
                    // Mostrar bot√≥n de admin si es administrador
                    if (data.user.role === 'admin') {
                        document.getElementById('admin-btn').style.display = 'inline-block';
                    }
                } else {
                    throw new Error('Token inv√°lido');
                }
            } catch (error) {
                alert('Error de autenticaci√≥n. Redirigiendo al login...');
                localStorage.removeItem('token');
                window.location.href = 'login.html';
            }
        }

        // Probar endpoint protegido
        async function testAuthEndpoint() {
            const resultsDiv = document.getElementById('test-results');
            
            try {
                const response = await fetch('/api/auth/verify', {
                    headers: {
                        'Authorization': `Bearer ${userToken}`
                    }
                });
                
                const data = await response.json();
                
                if (response.ok) {
                    resultsDiv.innerHTML = `
                        <div class="protected-content">
                            <h4>‚úÖ Test de Autenticaci√≥n Exitoso</h4>
                            <p>El token es v√°lido y el endpoint responde correctamente.</p>
                            <pre>${JSON.stringify(data, null, 2)}</pre>
                        </div>
                    `;
                } else {
                    throw new Error(data.message);
                }
            } catch (error) {
                resultsDiv.innerHTML = `
                    <div style="background-color: #f8d7da; color: #721c24; padding: 15px; border-radius: 5px;">
                        <h4>‚ùå Error en Test de Autenticaci√≥n</h4>
                        <p>${error.message}</p>
                    </div>
                `;
            }
        }

        function goToAdmin() {
            window.location.href = 'admin.html';
        }

        function logout() {
            localStorage.removeItem('token');
            alert('Sesi√≥n cerrada exitosamente');
            window.location.href = 'index.html';
        }

        // Cargar informaci√≥n al inicializar
        loadUserInfo();
    </script>
</body>
</html>-->
&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;es&quot;&gt;
&lt;head&gt;
    &lt;meta charset=&quot;UTF-8&quot;&gt;
    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;
    &lt;title&gt;Dashboard&lt;/title&gt;
    &lt;style&gt;
        body { font-family: Arial, sans-serif; max-width: 800px; margin: 0 auto; padding: 20px; }
        .header { background-color: #f8f9fa; padding: 20px; border-radius: 8px; margin-bottom: 20px; }
        .user-info { background-color: #e3f2fd; padding: 15px; border-radius: 5px; margin-bottom: 20px; }
        .btn { padding: 10px 15px; margin: 5px; text-decoration: none; border: none; cursor: pointer; border-radius: 5px; }
        .btn-primary { background-color: #007bff; color: white; }
        .btn-success { background-color: #28a745; color: white; }
        .btn-warning { background-color: #ffc107; color: black; }
        .btn-danger { background-color: #dc3545; color: white; }
        .btn:hover { opacity: 0.8; }
        .actions { margin-top: 20px; }
        .protected-content { background-color: #d4edda; padding: 15px; border-radius: 5px; margin: 10px 0; }
    &lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;div class=&quot;header&quot;&gt;
        &lt;h1&gt;üìä Dashboard del Usuario&lt;/h1&gt;
        &lt;p&gt;Panel de control para usuarios autenticados&lt;/p&gt;
    &lt;/div&gt;
    
    &lt;div class=&quot;user-info&quot;&gt;
        &lt;h3&gt;Informaci&oacute;n del Usuario&lt;/h3&gt;
        &lt;p&gt;&lt;strong&gt;Email:&lt;/strong&gt; &lt;span id=&quot;user-email&quot;&gt;Cargando...&lt;/span&gt;&lt;/p&gt;
        &lt;p&gt;&lt;strong&gt;Rol:&lt;/strong&gt; &lt;span id=&quot;user-role&quot;&gt;Cargando...&lt;/span&gt;&lt;/p&gt;
        &lt;p&gt;&lt;strong&gt;ID:&lt;/strong&gt; &lt;span id=&quot;user-id&quot;&gt;Cargando...&lt;/span&gt;&lt;/p&gt;
    &lt;/div&gt;
    
    &lt;div class=&quot;protected-content&quot;&gt;
        &lt;h3&gt;üîí Contenido Protegido&lt;/h3&gt;
        &lt;p&gt;Este contenido solo es visible para usuarios autenticados.&lt;/p&gt;
        &lt;p&gt;Tu token JWT est&aacute; activo y es v&aacute;lido.&lt;/p&gt;
    &lt;/div&gt;
    
    &lt;div class=&quot;actions&quot;&gt;
        &lt;h3&gt;Acciones Disponibles&lt;/h3&gt;
        &lt;button onclick=&quot;testAuthEndpoint()&quot; class=&quot;btn btn-primary&quot;&gt;Verificar Token&lt;/button&gt;
        &lt;button id=&quot;admin-btn&quot; onclick=&quot;goToAdmin()&quot; class=&quot;btn btn-success&quot; style=&quot;display: none;&quot;&gt;Panel de Admin&lt;/button&gt;
        &lt;a href=&quot;index.html&quot; class=&quot;btn btn-warning&quot;&gt;Volver al Inicio&lt;/a&gt;
        &lt;button onclick=&quot;logout()&quot; class=&quot;btn btn-danger&quot;&gt;Cerrar Sesi&oacute;n&lt;/button&gt;
    &lt;/div&gt;
    
    &lt;div id=&quot;test-results&quot; style=&quot;margin-top: 20px;&quot;&gt;&lt;/div&gt;

    &lt;script&gt;
        // Verificar autenticaci&oacute;n al cargar la p&aacute;gina
        const userToken = localStorage.getItem('token');
        if (!userToken) {
            alert('No est&aacute;s autenticado. Redirigiendo al login...');
            window.location.href = 'login.html';
        }

        // Cargar informaci&oacute;n del usuario
        async function loadUserInfo() {
            try {
                const response = await fetch('/api/auth/verify', {
                    headers: {
                        'Authorization': `Bearer ${userToken}`
                    }
                });
                
                const data = await response.json();
                
                if (response.ok &amp;&amp; data.user) {
                    document.getElementById('user-email').textContent = data.user.email;
                    document.getElementById('user-role').textContent = data.user.role;
                    document.getElementById('user-id').textContent = data.user.id;
                    
                    // Mostrar bot&oacute;n de admin si es administrador
                    if (data.user.role === 'admin') {
                        document.getElementById('admin-btn').style.display = 'inline-block';
                    }
                } else {
                    throw new Error('Token inv&aacute;lido');
                }
            } catch (error) {
                alert('Error de autenticaci&oacute;n. Redirigiendo al login...');
                localStorage.removeItem('token');
                window.location.href = 'login.html';
            }
        }

        // Probar endpoint protegido
        async function testAuthEndpoint() {
            const resultsDiv = document.getElementById('test-results');
            
            try {
                const response = await fetch('/api/auth/verify', {
                    headers: {
                        'Authorization': `Bearer ${userToken}`
                    }
                });
                
                const data = await response.json();
                
                if (response.ok) {
                    resultsDiv.innerHTML = `
                        &lt;div class=&quot;protected-content&quot;&gt;
                            &lt;h4&gt;‚úÖ Test de Autenticaci&oacute;n Exitoso&lt;/h4&gt;
                            &lt;p&gt;El token es v&aacute;lido y el endpoint responde correctamente.&lt;/p&gt;
                            &lt;pre&gt;${JSON.stringify(data, null, 2)}&lt;/pre&gt;
                        &lt;/div&gt;
                    `;
                } else {
                    throw new Error(data.message);
                }
            } catch (error) {
                resultsDiv.innerHTML = `
                    &lt;div style=&quot;background-color: #f8d7da; color: #721c24; padding: 15px; border-radius: 5px;&quot;&gt;
                        &lt;h4&gt;‚ùå Error en Test de Autenticaci&oacute;n&lt;/h4&gt;
                        &lt;p&gt;${error.message}&lt;/p&gt;
                    &lt;/div&gt;
                `;
            }
        }

        function goToAdmin() {
            window.location.href = 'admin.html';
        }

        function logout() {
            localStorage.removeItem('token');
            alert('Sesi&oacute;n cerrada exitosamente');
            window.location.href = 'index.html';
        }

        // Cargar informaci&oacute;n al inicializar
        loadUserInfo();
    &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>
                </div>
            </div>

            <h3 class="subsection-title">5. Panel de Administraci√≥n (views/admin.html)</h3>
            <div class="language-tag">üìÑ HTML</div>
            <div class="code-block line-numbers">
                <div class="code-header">views/admin.html</div>
                <div class="code-content">
                    <pre><code class="language-html">
<!--<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Panel de Administraci√≥n</title>
    <style>
        body { font-family: Arial, sans-serif; max-width: 1000px; margin: 0 auto; padding: 20px; }
        .header { background-color: #dc3545; color: white; padding: 20px; border-radius: 8px; margin-bottom: 20px; }
        .admin-section { background-color: #fff3cd; padding: 15px; border-radius: 5px; margin-bottom: 20px; border-left: 4px solid #ffc107; }
        .btn { padding: 10px 15px; margin: 5px; text-decoration: none; border: none; cursor: pointer; border-radius: 5px; }
        .btn-primary { background-color: #007bff; color: white; }
        .btn-warning { background-color: #ffc107; color: black; }
        .btn-danger { background-color: #dc3545; color: white; }
        .btn:hover { opacity: 0.8; }
        .user-info { background-color: #f8f9fa; padding: 15px; border-radius: 5px; margin-bottom: 20px; }
        .restricted-message { background-color: #f8d7da; color: #721c24; padding: 15px; border-radius: 5px; margin: 20px 0; }
    </style>
</head>
<body>
    <div class="header">
        <h1>‚öôÔ∏è Panel de Administraci√≥n</h1>
        <p>√Årea restringida - Solo para administradores</p>
    </div>
    
    <div class="user-info">
        <h3>Informaci√≥n del Administrador</h3>
        <p><strong>Email:</strong> <span id="admin-email">Cargando...</span></p>
        <p><strong>Rol:</strong> <span id="admin-role">Cargando...</span></p>
        <p><strong>ID:</strong> <span id="admin-id">Cargando...</span></p>
    </div>
    
    <div class="admin-section">
        <h3>üîê Contenido Exclusivo de Administrador</h3>
        <p>Este contenido solo es visible para usuarios con rol de administrador.</p>
        <p>Aqu√≠ podr√≠as implementar funcionalidades como:</p>
        <ul>
            <li>Gesti√≥n de usuarios</li>
            <li>Configuraci√≥n del sistema</li>
            <li>Reportes y estad√≠sticas</li>
            <li>Logs de auditor√≠a</li>
        </ul>
    </div>
    
    <div class="admin-section">
        <h3>üìä Estad√≠sticas del Sistema</h3>
        <p><strong>Total de usuarios registrados:</strong> <span id="user-count">Calculando...</span></p>
        <p><strong>√öltima conexi√≥n:</strong> <span id="last-connection">Verificando...</span></p>
        <p><strong>Estado del sistema:</strong> <span style="color: green;">‚úÖ Operativo</span></p>
    </div>
    
    <div class="actions">
        <h3>Acciones de Administrador</h3>
        <button onclick="testAdminEndpoint()" class="btn btn-primary">Verificar Permisos de Admin</button>
        <a href="dashboard.html" class="btn btn-warning">Dashboard Usuario</a>
        <button onclick="logout()" class="btn btn-danger">Cerrar Sesi√≥n</button>
    </div>
    
    <div id="test-results" style="margin-top: 20px;"></div>

    <script>
        const adminToken = localStorage.getItem('token');
        
        // Verificar autenticaci√≥n y permisos de admin
        if (!adminToken) {
            showAccessDenied('No est√°s autenticado');
        }

        async function loadAdminInfo() {
            try {
                // Primero verificar autenticaci√≥n
                const authResponse = await fetch('/api/auth/verify', {
                    headers: {
                        'Authorization': `Bearer ${adminToken}`
                    }
                });
                
                const authData = await authResponse.json();
                
                if (!authResponse.ok || !authData.user) {
                    throw new Error('Token inv√°lido');
                }

                // Verificar que es administrador
                if (authData.user.role !== 'admin') {
                    showAccessDenied('No tienes permisos de administrador');
                    return;
                }

                // Cargar informaci√≥n del admin
                document.getElementById('admin-email').textContent = authData.user.email;
                document.getElementById('admin-role').textContent = authData.user.role;
                document.getElementById('admin-id').textContent = authData.user.id;
                
                // Simular estad√≠sticas (en una app real, estos vendr√≠an de endpoints espec√≠ficos)
                document.getElementById('user-count').textContent = '5 usuarios';
                document.getElementById('last-connection').textContent = new Date().toLocaleString();
                
            } catch (error) {
                showAccessDenied('Error de autenticaci√≥n');
            }
        }

        function showAccessDenied(reason) {
            document.body.innerHTML = `
                <div class="restricted-message">
                    <h2>üö´ Acceso Denegado</h2>
                    <p><strong>Raz√≥n:</strong> ${reason}</p>
                    <p>Esta p√°gina est√° restringida solo para administradores.</p>
                    <div style="margin-top: 20px;">
                        <a href="login.html" class="btn btn-primary">Iniciar Sesi√≥n</a>
                        <a href="index.html" class="btn btn-warning">Volver al Inicio</a>
                    </div>
                </div>
            `;
        }

        async function testAdminEndpoint() {
            const resultsDiv = document.getElementById('test-results');
            
            try {
                // Intentar acceder a una ruta protegida de admin
                const response = await fetch('/api/users/admin', {
                    headers: {
                        'Authorization': `Bearer ${adminToken}`
                    }
                });
                
                if (response.ok) {
                    resultsDiv.innerHTML = `
                        <div class="admin-section">
                            <h4>‚úÖ Test de Permisos de Admin Exitoso</h4>
                            <p>Tienes acceso completo a las funcionalidades de administrador.</p>
                            <p>Endpoint /api/users/admin respondi√≥ correctamente.</p>
                        </div>
                    `;
                } else if (response.status === 403) {
                    throw new Error('No tienes permisos de administrador');
                } else {
                    throw new Error('Error en el servidor');
                }
            } catch (error) {
                resultsDiv.innerHTML = `
                    <div class="restricted-message">
                        <h4>‚ùå Error en Test de Permisos</h4>
                        <p>${error.message}</p>
                    </div>
                `;
            }
        }

        function logout() {
            localStorage.removeItem('token');
            alert('Sesi√≥n de administrador cerrada');
            window.location.href = 'index.html';
        }

        // Cargar informaci√≥n al inicializar
        loadAdminInfo();
    </script>
</body>
</html>-->
&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;es&quot;&gt;
&lt;head&gt;
    &lt;meta charset=&quot;UTF-8&quot;&gt;
    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;
    &lt;title&gt;Panel de Administraci&oacute;n&lt;/title&gt;
    &lt;style&gt;
        body { font-family: Arial, sans-serif; max-width: 1000px; margin: 0 auto; padding: 20px; }
        .header { background-color: #dc3545; color: white; padding: 20px; border-radius: 8px; margin-bottom: 20px; }
        .admin-section { background-color: #fff3cd; padding: 15px; border-radius: 5px; margin-bottom: 20px; border-left: 4px solid #ffc107; }
        .btn { padding: 10px 15px; margin: 5px; text-decoration: none; border: none; cursor: pointer; border-radius: 5px; }
        .btn-primary { background-color: #007bff; color: white; }
        .btn-warning { background-color: #ffc107; color: black; }
        .btn-danger { background-color: #dc3545; color: white; }
        .btn:hover { opacity: 0.8; }
        .user-info { background-color: #f8f9fa; padding: 15px; border-radius: 5px; margin-bottom: 20px; }
        .restricted-message { background-color: #f8d7da; color: #721c24; padding: 15px; border-radius: 5px; margin: 20px 0; }
    &lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;div class=&quot;header&quot;&gt;
        &lt;h1&gt;‚öôÔ∏è Panel de Administraci&oacute;n&lt;/h1&gt;
        &lt;p&gt;&Aacute;rea restringida - Solo para administradores&lt;/p&gt;
    &lt;/div&gt;
    
    &lt;div class=&quot;user-info&quot;&gt;
        &lt;h3&gt;Informaci&oacute;n del Administrador&lt;/h3&gt;
        &lt;p&gt;&lt;strong&gt;Email:&lt;/strong&gt; &lt;span id=&quot;admin-email&quot;&gt;Cargando...&lt;/span&gt;&lt;/p&gt;
        &lt;p&gt;&lt;strong&gt;Rol:&lt;/strong&gt; &lt;span id=&quot;admin-role&quot;&gt;Cargando...&lt;/span&gt;&lt;/p&gt;
        &lt;p&gt;&lt;strong&gt;ID:&lt;/strong&gt; &lt;span id=&quot;admin-id&quot;&gt;Cargando...&lt;/span&gt;&lt;/p&gt;
    &lt;/div&gt;
    
    &lt;div class=&quot;admin-section&quot;&gt;
        &lt;h3&gt;üîê Contenido Exclusivo de Administrador&lt;/h3&gt;
        &lt;p&gt;Este contenido solo es visible para usuarios con rol de administrador.&lt;/p&gt;
        &lt;p&gt;Aqu&iacute; podr&iacute;as implementar funcionalidades como:&lt;/p&gt;
        &lt;ul&gt;
            &lt;li&gt;Gesti&oacute;n de usuarios&lt;/li&gt;
            &lt;li&gt;Configuraci&oacute;n del sistema&lt;/li&gt;
            &lt;li&gt;Reportes y estad&iacute;sticas&lt;/li&gt;
            &lt;li&gt;Logs de auditor&iacute;a&lt;/li&gt;
        &lt;/ul&gt;
    &lt;/div&gt;
    
    &lt;div class=&quot;admin-section&quot;&gt;
        &lt;h3&gt;üìä Estad&iacute;sticas del Sistema&lt;/h3&gt;
        &lt;p&gt;&lt;strong&gt;Total de usuarios registrados:&lt;/strong&gt; &lt;span id=&quot;user-count&quot;&gt;Calculando...&lt;/span&gt;&lt;/p&gt;
        &lt;p&gt;&lt;strong&gt;&Uacute;ltima conexi&oacute;n:&lt;/strong&gt; &lt;span id=&quot;last-connection&quot;&gt;Verificando...&lt;/span&gt;&lt;/p&gt;
        &lt;p&gt;&lt;strong&gt;Estado del sistema:&lt;/strong&gt; &lt;span style=&quot;color: green;&quot;&gt;‚úÖ Operativo&lt;/span&gt;&lt;/p&gt;
    &lt;/div&gt;
    
    &lt;div class=&quot;actions&quot;&gt;
        &lt;h3&gt;Acciones de Administrador&lt;/h3&gt;
        &lt;button onclick=&quot;testAdminEndpoint()&quot; class=&quot;btn btn-primary&quot;&gt;Verificar Permisos de Admin&lt;/button&gt;
        &lt;a href=&quot;dashboard.html&quot; class=&quot;btn btn-warning&quot;&gt;Dashboard Usuario&lt;/a&gt;
        &lt;button onclick=&quot;logout()&quot; class=&quot;btn btn-danger&quot;&gt;Cerrar Sesi&oacute;n&lt;/button&gt;
    &lt;/div&gt;
    
    &lt;div id=&quot;test-results&quot; style=&quot;margin-top: 20px;&quot;&gt;&lt;/div&gt;

    &lt;script&gt;
        const adminToken = localStorage.getItem('token');
        
        // Verificar autenticaci&oacute;n y permisos de admin
        if (!adminToken) {
            showAccessDenied('No est&aacute;s autenticado');
        }

        async function loadAdminInfo() {
            try {
                // Primero verificar autenticaci&oacute;n
                const authResponse = await fetch('/api/auth/verify', {
                    headers: {
                        'Authorization': `Bearer ${adminToken}`
                    }
                });
                
                const authData = await authResponse.json();
                
                if (!authResponse.ok || !authData.user) {
                    throw new Error('Token inv&aacute;lido');
                }

                // Verificar que es administrador
                if (authData.user.role !== 'admin') {
                    showAccessDenied('No tienes permisos de administrador');
                    return;
                }

                // Cargar informaci&oacute;n del admin
                document.getElementById('admin-email').textContent = authData.user.email;
                document.getElementById('admin-role').textContent = authData.user.role;
                document.getElementById('admin-id').textContent = authData.user.id;
                
                // Simular estad&iacute;sticas (en una app real, estos vendr&iacute;an de endpoints espec&iacute;ficos)
                document.getElementById('user-count').textContent = '5 usuarios';
                document.getElementById('last-connection').textContent = new Date().toLocaleString();
                
            } catch (error) {
                showAccessDenied('Error de autenticaci&oacute;n');
            }
        }

        function showAccessDenied(reason) {
            document.body.innerHTML = `
                &lt;div class=&quot;restricted-message&quot;&gt;
                    &lt;h2&gt;üö´ Acceso Denegado&lt;/h2&gt;
                    &lt;p&gt;&lt;strong&gt;Raz&oacute;n:&lt;/strong&gt; ${reason}&lt;/p&gt;
                    &lt;p&gt;Esta p&aacute;gina est&aacute; restringida solo para administradores.&lt;/p&gt;
                    &lt;div style=&quot;margin-top: 20px;&quot;&gt;
                        &lt;a href=&quot;login.html&quot; class=&quot;btn btn-primary&quot;&gt;Iniciar Sesi&oacute;n&lt;/a&gt;
                        &lt;a href=&quot;index.html&quot; class=&quot;btn btn-warning&quot;&gt;Volver al Inicio&lt;/a&gt;
                    &lt;/div&gt;
                &lt;/div&gt;
            `;
        }

        async function testAdminEndpoint() {
            const resultsDiv = document.getElementById('test-results');
            
            try {
                // Intentar acceder a una ruta protegida de admin
                const response = await fetch('/api/users/admin', {
                    headers: {
                        'Authorization': `Bearer ${adminToken}`
                    }
                });
                
                if (response.ok) {
                    resultsDiv.innerHTML = `
                        &lt;div class=&quot;admin-section&quot;&gt;
                            &lt;h4&gt;‚úÖ Test de Permisos de Admin Exitoso&lt;/h4&gt;
                            &lt;p&gt;Tienes acceso completo a las funcionalidades de administrador.&lt;/p&gt;
                            &lt;p&gt;Endpoint /api/users/admin respondi&oacute; correctamente.&lt;/p&gt;
                        &lt;/div&gt;
                    `;
                } else if (response.status === 403) {
                    throw new Error('No tienes permisos de administrador');
                } else {
                    throw new Error('Error en el servidor');
                }
            } catch (error) {
                resultsDiv.innerHTML = `
                    &lt;div class=&quot;restricted-message&quot;&gt;
                        &lt;h4&gt;‚ùå Error en Test de Permisos&lt;/h4&gt;
                        &lt;p&gt;${error.message}&lt;/p&gt;
                    &lt;/div&gt;
                `;
            }
        }

        function logout() {
            localStorage.removeItem('token');
            alert('Sesi&oacute;n de administrador cerrada');
            window.location.href = 'index.html';
        }

        // Cargar informaci&oacute;n al inicializar
        loadAdminInfo();
    &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>
                </div>
            </div>

            <div class="bg-blue-50 dark:bg-dark-300 p-4 rounded-lg mt-4">
                <h4 class="font-semibold text-blue-700 dark:text-blue-400 mb-2">üéØ Caracter√≠sticas de las P√°ginas HTML</h4>
                <ul class="list-disc list-inside space-y-1 text-gray-700 dark:text-gray-300 text-sm">
                    <li><strong>Simplicidad:</strong> Dise√±o minimalista enfocado en funcionalidad</li>
                    <li><strong>Responsividad:</strong> Se adaptan a diferentes tama√±os de pantalla</li>
                    <li><strong>Validaci√≥n:</strong> Verificaci√≥n de formularios en frontend y backend</li>
                    <li><strong>Gesti√≥n de JWT:</strong> Almacenamiento y uso de tokens para autenticaci√≥n</li>
                    <li><strong>Control de Acceso:</strong> Redirecci√≥n autom√°tica seg√∫n permisos</li>
                    <li><strong>Feedback Visual:</strong> Mensajes de error y √©xito claros</li>
                </ul>
            </div>

            <div class="bg-green-50 dark:bg-dark-300 p-4 rounded-lg mt-4">
                <h4 class="font-semibold text-green-700 dark:text-green-400 mb-2">üîÑ Flujo de Navegaci√≥n</h4>
                <ol class="list-decimal list-inside space-y-1 text-gray-700 dark:text-gray-300 text-sm">
                    <li><strong>index.html</strong> ‚Üí P√°gina de inicio con opciones de login/registro</li>
                    <li><strong>register.html</strong> ‚Üí Registro de nuevos usuarios ‚Üí Dashboard</li>
                    <li><strong>login.html</strong> ‚Üí Autenticaci√≥n de usuarios existentes ‚Üí Dashboard</li>
                    <li><strong>dashboard.html</strong> ‚Üí Panel principal para usuarios autenticados</li>
                    <li><strong>admin.html</strong> ‚Üí Panel exclusivo para administradores</li>
                </ol>
            </div>
        </section>

        <!-- Paso 13: Consideraciones de Seguridad -->
        <section class="bg-gray-50 dark:bg-dark-200 shadow-lg rounded-lg p-6 mb-8">
            <div class="flex items-center mb-4">
                <div class="step-number mr-4">13</div>
                <h2 class="section-title mb-0">Consideraciones de Seguridad</h2>
            </div>

            <h3 class="subsection-title">‚úÖ Implementadas en el Proyecto</h3>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-6">
                <div class="bg-green-50 dark:bg-green-900/20 p-4 rounded-lg">
                    <h4 class="font-semibold text-green-700 dark:text-green-400 mb-2">Autenticaci√≥n</h4>
                    <ul class="list-disc list-inside space-y-1 text-gray-700 dark:text-gray-300 text-sm">
                        <li>Hash de contrase√±as con bcrypt (12 rounds)</li>
                        <li>JWT con expiraci√≥n configurable</li>
                        <li>Validaci√≥n de entrada robusta</li>
                        <li>Protecci√≥n contra ataques de fuerza bruta</li>
                    </ul>
                </div>
                
                <div class="bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg">
                    <h4 class="font-semibold text-blue-700 dark:text-blue-400 mb-2">Autorizaci√≥n</h4>
                    <ul class="list-disc list-inside space-y-1 text-gray-700 dark:text-gray-300 text-sm">
                        <li>Control de acceso basado en roles (RBAC)</li>
                        <li>Middleware de verificaci√≥n de permisos</li>
                        <li>Separaci√≥n de rutas p√∫blicas y privadas</li>
                        <li>Tokens con informaci√≥n m√≠nima necesaria</li>
                    </ul>
                </div>
                
                <div class="bg-purple-50 dark:bg-purple-900/20 p-4 rounded-lg">
                    <h4 class="font-semibold text-purple-700 dark:text-purple-400 mb-2">Aplicaci√≥n</h4>
                    <ul class="list-disc list-inside space-y-1 text-gray-700 dark:text-gray-300 text-sm">
                        <li>Headers de seguridad con Helmet</li>
                        <li>Configuraci√≥n CORS adecuada</li>
                        <li>Variables de entorno para secretos</li>
                        <li>Manejo de errores sin exponer informaci√≥n</li>
                    </ul>
                </div>
                
                <div class="bg-orange-50 dark:bg-orange-900/20 p-4 rounded-lg">
                    <h4 class="font-semibold text-orange-700 dark:text-orange-400 mb-2">Base de Datos</h4>
                    <ul class="list-disc list-inside space-y-1 text-gray-700 dark:text-gray-300 text-sm">
                        <li>Consultas parametrizadas (previene SQL injection)</li>
                        <li>√çndices para optimizar rendimiento</li>
                        <li>UUIDs para IDs no predecibles</li>
                        <li>Timestamps para auditor√≠a</li>
                    </ul>
                </div>
            </div>

            <h3 class="subsection-title">üöÄ Recomendaciones para Producci√≥n</h3>
            <div class="bg-red-50 dark:bg-red-900/20 p-4 rounded-lg">
                <ul class="list-disc list-inside space-y-2 text-gray-700 dark:text-gray-300 text-sm">
                    <li><strong>HTTPS:</strong> Usa siempre HTTPS en producci√≥n para proteger tokens en tr√°nsito</li>
                    <li><strong>Rate Limiting:</strong> Implementa l√≠mites de velocidad para prevenir abuso</li>
                    <li><strong>Logging:</strong> Registra eventos de seguridad y accesos</li>
                    <li><strong>Monitoreo:</strong> Configura alertas para intentos de acceso sospechosos</li>
                    <li><strong>Backup:</strong> Implementa respaldos regulares de la base de datos</li>
                    <li><strong>Actualizaciones:</strong> Mant√©n las dependencias actualizadas</li>
                </ul>
            </div>
        </section>

        <!-- Tecnolog√≠as Utilizadas -->
        <section class="bg-gray-50 dark:bg-dark-200 shadow-lg rounded-lg p-6 mb-8">
            <h2 class="section-title">üõ†Ô∏è Tecnolog√≠as Utilizadas</h2>
            <div class="overflow-x-auto">
                <table class="min-w-full dark:bg-dark-300 border border-gray-300 dark:border-gray-600">
                    <thead class="bg-gray-100 dark:bg-dark-400">
                        <tr>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Tecnolog√≠a</th>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Versi√≥n</th>
                            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Prop√≥sito</th>
                        </tr>
                    </thead>
                    <tbody class="divide-y divide-gray-200 dark:divide-gray-600">
                        <tr>
                            <td class="px-6 py-4 whitespace-nowrap font-medium text-gray-900 dark:text-gray-100">Node.js</td>
                            <td class="px-6 py-4 whitespace-nowrap text-gray-700 dark:text-gray-300">‚â•18.0.0</td>
                            <td class="px-6 py-4 text-gray-700 dark:text-gray-300">Runtime de JavaScript</td>
                        </tr>
                        <tr>
                            <td class="px-6 py-4 whitespace-nowrap font-medium text-gray-900 dark:text-gray-100">Express.js</td>
                            <td class="px-6 py-4 whitespace-nowrap text-gray-700 dark:text-gray-300">^4.18.2</td>
                            <td class="px-6 py-4 text-gray-700 dark:text-gray-300">Framework web</td>
                        </tr>
                        <tr>
                            <td class="px-6 py-4 whitespace-nowrap font-medium text-gray-900 dark:text-gray-100">PostgreSQL</td>
                            <td class="px-6 py-4 whitespace-nowrap text-gray-700 dark:text-gray-300">‚â•13.0</td>
                            <td class="px-6 py-4 text-gray-700 dark:text-gray-300">Base de datos</td>
                        </tr>
                        <tr>
                            <td class="px-6 py-4 whitespace-nowrap font-medium text-gray-900 dark:text-gray-100">JWT</td>
                            <td class="px-6 py-4 whitespace-nowrap text-gray-700 dark:text-gray-300">^9.0.2</td>
                            <td class="px-6 py-4 text-gray-700 dark:text-gray-300">Autenticaci√≥n</td>
                        </tr>
                        <tr>
                            <td class="px-6 py-4 whitespace-nowrap font-medium text-gray-900 dark:text-gray-100">bcryptjs</td>
                            <td class="px-6 py-4 whitespace-nowrap text-gray-700 dark:text-gray-300">^2.4.3</td>
                            <td class="px-6 py-4 text-gray-700 dark:text-gray-300">Hashing de contrase√±as</td>
                        </tr>
                        <tr>
                            <td class="px-6 py-4 whitespace-nowrap font-medium text-gray-900 dark:text-gray-100">UUID</td>
                            <td class="px-6 py-4 whitespace-nowrap text-gray-700 dark:text-gray-300">^9.0.1</td>
                            <td class="px-6 py-4 text-gray-700 dark:text-gray-300">Generaci√≥n de IDs √∫nicos</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </section>

        <!-- Criterios de Evaluaci√≥n -->
        <section class="bg-gray-50 dark:bg-dark-200 shadow-lg rounded-lg p-6 mb-8">
            <h2 class="section-title">üèÜ Criterios de Evaluaci√≥n</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                <div class="bg-green-50 dark:bg-green-900/20 p-4 rounded-lg">
                    <h3 class="font-semibold text-green-700 dark:text-green-400 mb-2">Funcionamiento (30%)</h3>
                    <ul class="list-disc list-inside space-y-1 text-gray-700 dark:text-gray-300 text-sm">
                        <li>Registro de usuarios</li>
                        <li>Inicio de sesi√≥n</li>
                        <li>Protecci√≥n de rutas</li>
                        <li>Gesti√≥n de tokens</li>
                    </ul>
                </div>
                
                <div class="bg-blue-50 dark:bg-blue-900/20 p-4 rounded-lg">
                    <h3 class="font-semibold text-blue-700 dark:text-blue-400 mb-2">JWT y Seguridad (25%)</h3>
                    <ul class="list-disc list-inside space-y-1 text-gray-700 dark:text-gray-300 text-sm">
                        <li>Implementaci√≥n correcta de JWT</li>
                        <li>Hash de contrase√±as</li>
                        <li>Middleware de autenticaci√≥n</li>
                        <li>Control de roles</li>
                    </ul>
                </div>
                
                <div class="bg-purple-50 dark:bg-purple-900/20 p-4 rounded-lg">
                    <h3 class="font-semibold text-purple-700 dark:text-purple-400 mb-2">Arquitectura MVC (20%)</h3>
                    <ul class="list-disc list-inside space-y-1 text-gray-700 dark:text-gray-300 text-sm">
                        <li>Separaci√≥n de responsabilidades</li>
                        <li>Estructura de carpetas</li>
                        <li>Modelos bien definidos</li>
                        <li>Controladores organizados</li>
                    </ul>
                </div>
                
                <div class="bg-orange-50 dark:bg-orange-900/20 p-4 rounded-lg">
                    <h3 class="font-semibold text-orange-700 dark:text-orange-400 mb-2">Base de Datos (15%)</h3>
                    <ul class="list-disc list-inside space-y-1 text-gray-700 dark:text-gray-300 text-sm">
                        <li>Dise√±o de esquema</li>
                        <li>Consultas optimizadas</li>
                        <li>Manejo de conexiones</li>
                        <li>Validaci√≥n de datos</li>
                    </ul>
                </div>
                
                <div class="bg-pink-50 dark:bg-pink-900/20 p-4 rounded-lg">
                    <h3 class="font-semibold text-pink-700 dark:text-pink-400 mb-2">Presentaci√≥n (10%)</h3>
                    <ul class="list-disc list-inside space-y-1 text-gray-700 dark:text-gray-300 text-sm">
                        <li>Documentaci√≥n clara</li>
                        <li>C√≥digo comentado</li>
                        <li>Estructura organizada</li>
                        <li>Buenas pr√°cticas</li>
                    </ul>
                </div>
            </div>
        </section>

        <!-- Resumen Final -->
        <section class="bg-gradient-to-r from-blue-500 to-purple-600 shadow-lg rounded-lg p-8 text-white">
            <h2 class="text-3xl font-bold mb-4 text-center">üéâ ¬°Felicitaciones!</h2>
            <p class="text-lg text-center mb-6">
                Has completado la implementaci√≥n de un sistema completo de autenticaci√≥n con JWT, 
                siguiendo las mejores pr√°cticas de seguridad y la arquitectura MVC.
            </p>
            
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 text-center">
                <div>
                    <div class="text-4xl mb-2">üîê</div>
                    <h3 class="font-bold mb-2">Seguridad</h3>
                    <p class="text-sm">Autenticaci√≥n robusta con JWT y bcrypt</p>
                </div>
                <div>
                    <div class="text-4xl mb-2">üèóÔ∏è</div>
                    <h3 class="font-bold mb-2">Arquitectura</h3>
                    <p class="text-sm">Estructura MVC escalable y mantenible</p>
                </div>
                <div>
                    <div class="text-4xl mb-2">üöÄ</div>
                    <h3 class="font-bold mb-2">Producci√≥n</h3>
                    <p class="text-sm">Listo para desplegar en entornos reales</p>
                </div>
            </div>
            
            <div class="text-center mt-6">
                <p class="text-lg font-semibold">
                    ¬°Desarrollado con ‚ù§Ô∏è para el aprendizaje de tecnolog√≠as web!
                </p>
            </div>
        </section>

    </div>

    <!-- Script para el modo oscuro -->
    <script>
        // alert("hola");
    const navbar1 = document.getElementById('navbar1');
    const darkModeToggle = navbar1.querySelector('#darkModeToggle');
    const root = document.documentElement;
    // Funci√≥n para aplicar el tema
    const applyTheme = (theme) => {
        if (theme === 'dark') {
            root.classList.add('dark');
        } else {
            root.classList.remove('dark');
        }
        localStorage.setItem('theme', theme);
    };

    // Event listener para el bot√≥n
    darkModeToggle.addEventListener('click', () => {
        const isDark = root.classList.contains('dark');
        applyTheme(isDark ? 'light' : 'dark');
    });

    // Cargar tema al iniciar
    const savedTheme = localStorage.getItem('theme');
    const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;

    if (savedTheme) {
        applyTheme(savedTheme);
    } else if (prefersDark) {
        applyTheme('dark');
    } else {
        applyTheme('light');
    }
    
    // Inicializar Prism.js cuando la p√°gina est√© lista
    document.addEventListener('DOMContentLoaded', function() {
        reinitializePrism();
    });
</script>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- Prism.js Scripts -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-javascript.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-json.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-sql.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-bash.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-powershell.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/line-numbers/prism-line-numbers.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/toolbar/prism-toolbar.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/copy-to-clipboard/prism-copy-to-clipboard.min.js"></script>

  

    <!-- Configuraci√≥n de Prism.js -->
    <script>
        // Configurar Prism.js
        window.Prism = window.Prism || {};
        Prism.plugins.toolbar.registerButton('copy-to-clipboard', {
            text: 'üìã Copiar',
            className: 'copy-button',
            onClick: function (env) {
                navigator.clipboard.writeText(env.code).then(() => {
                    this.textContent = '‚úÖ ¬°Copiado!';
                    setTimeout(() => {
                        this.textContent = 'üìã Copiar';
                    }, 2000);
                });
            }
        });
        
        // Configurar toolbar para todos los bloques de c√≥digo
        Prism.plugins.toolbar.defaults = {
            'copy-to-clipboard': true,
            'label': 'Copiar al portapapeles'
        };
        
        // Reinicializar Prism.js despu√©s de cambios de tema
        function reinitializePrism() {
            setTimeout(() => {
                Prism.highlightAll();
            }, 100);
        }
    </script>

 
</body>
</html>