<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PowerShell: Laboratorio de Pr√°cticas Avanzadas</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@300;400;500;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Fira Code', monospace;
            background-color: #0d0221;
            color: #00f0ff;
            text-shadow: 0 0 5px #00f0ff, 0 0 10px #00f0ff;
        }
        .container {
            max-width: 1200px;
            margin: auto;
            padding: 2rem;
        }
        .header-glitch {
            font-size: 3rem;
            font-weight: 700;
            color: #f0f;
            text-shadow: 0 0 5px #f0f, 0 0 10px #f0f, 0 0 15px #f0f,
                         -2px 2px 2px #00f0ff, 2px -2px 2px #ff0;
            animation: glitch 1.5s infinite;
        }
        .section-title {
            font-size: 2rem;
            font-weight: 500;
            color: #50fa7b;
            text-shadow: 0 0 5px #50fa7b;
            border-bottom: 2px solid #50fa7b;
            padding-bottom: 0.5rem;
            margin-bottom: 1.5rem;
        }
        .card {
            background-color: rgba(16, 1, 41, 0.8);
            border: 1px solid #ff00ff;
            border-radius: 8px;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            box-shadow: 0 0 15px rgba(255, 0, 255, 0.4);
            transition: transform 0.3s, box-shadow 0.3s;
        }
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 0 25px rgba(0, 240, 255, 0.6);
        }
        code {
            background-color: #282a36;
            color: #f8f8f2;
            padding: 0.2rem 0.5rem;
            border-radius: 4px;
            font-weight: bold;
        }
        pre {
            background-color: #282a36;
            color: #f8f8f2;
            padding: 1rem;
            border-radius: 8px;
            border-left: 4px solid #ff79c6;
            overflow-x: auto;
            text-shadow: none;
        }
        .comment { color: #6272a4; }
        .command { color: #8be9fd; }
        .parameter { color: #ffb86c; }
        .string { color: #f1fa8c; }
        .keyword { color: #ff79c6; }
        .variable { color: #8be9fd; }
        .property { color: #ffb86c; }
        .operator { color: #ff79c6; }
        
        .exercise-container {
            border: 2px dashed #f1fa8c;
            padding: 1.5rem;
            margin-top: 1.5rem;
            border-radius: 8px;
            background-color: rgba(40, 42, 54, 0.5);
        }
        .exercise-title {
            font-size: 1.5rem;
            color: #f1fa8c;
            text-shadow: 0 0 5px #f1fa8c;
            margin-bottom: 1rem;
        }
        .challenge-badge {
            display: inline-block;
            padding: 0.25rem 0.75rem;
            border-radius: 1rem;
            font-size: 0.75rem;
            font-weight: bold;
            text-shadow: none;
        }
        .badge-easy { background-color: #50fa7b; color: #282a36; }
        .badge-medium { background-color: #ffb86c; color: #282a36; }
        .badge-hard { background-color: #ff5555; color: #f8f8f2; }
        .badge-expert { background-color: #bd93f9; color: #282a36; }
        
        button {
            background-color: #bd93f9;
            color: #282a36;
            padding: 0.5rem 1rem;
            border: none;
            border-radius: 4px;
            font-weight: bold;
            cursor: pointer;
            transition: background-color 0.3s;
            text-shadow: none;
        }
        button:hover {
            background-color: #ff79c6;
        }
        
        .offcanvas {
            background-color: #0d0221;
            border-left: 3px solid #ff00ff;
        }
        .offcanvas-header {
            border-bottom: 1px solid #ff00ff;
        }
        .offcanvas-title {
            color: #f0f;
            text-shadow: 0 0 5px #f0f;
        }
        .offcanvas-body {
            color: #00f0ff;
        }
        .cmd-item {
            background-color: rgba(40, 42, 54, 0.8);
            border: 1px solid #bd93f9;
            border-radius: 6px;
            padding: 1rem;
            margin-bottom: 1rem;
        }
        .cmd-name {
            color: #50fa7b;
            font-weight: bold;
            font-size: 1.1rem;
        }
        .cmd-syntax {
            color: #8be9fd;
            font-size: 0.9rem;
            margin: 0.5rem 0;
        }
        .cmd-description {
            color: #f8f8f2;
            font-size: 0.85rem;
        }
        
        @keyframes glitch {
            0% { transform: translate(0); }
            20% { transform: translate(-2px, 2px); }
            40% { transform: translate(-2px, -2px); }
            60% { transform: translate(2px, 2px); }
            80% { transform: translate(2px, -2px); }
            100% { transform: translate(0); }
        }
    </style>
</head>
<body>

    <!-- Offcanvas - Referencia de Comandos -->
    <div class="offcanvas offcanvas-end" tabindex="-1" id="commandsReference">
        <div class="offcanvas-header">
            <h5 class="offcanvas-title">üöÄ Arsenal de Comandos</h5>
            <button type="button" class="btn-close btn-close-white" data-bs-dismiss="offcanvas"></button>
        </div>
        <div class="offcanvas-body">
            <!-- Buscador r√°pido -->
            <div class="mb-4">
                <h6 class="text-cyan-400 font-bold mb-2">üîç B√∫squeda R√°pida:</h6>
                <div class="input-group">
                    <input type="text" id="command-search" class="form-control bg-dark text-light border-purple" 
                           placeholder="Buscar cmdlet..." onkeyup="searchCommands()" style="background-color: #282a36 !important; border-color: #bd93f9;">
                    <button class="btn btn-outline-purple" type="button" onclick="document.getElementById('command-search').value=''; searchCommands();">
                        ‚ùå
                    </button>
                </div>
            </div>

            <!-- Navegaci√≥n por categor√≠as -->
            <div class="mb-4">
                <h6 class="text-purple-400 font-bold mb-2">üìã Categor√≠as:</h6>
                <div class="d-flex flex-wrap gap-2">
                    <button class="btn btn-sm btn-outline-light" onclick="scrollToCategory('processes')">Procesos</button>
                    <button class="btn btn-sm btn-outline-light" onclick="scrollToCategory('services')">Servicios</button>
                    <button class="btn btn-sm btn-outline-light" onclick="scrollToCategory('network')">Red</button>
                    <button class="btn btn-sm btn-outline-light" onclick="scrollToCategory('system')">Sistema</button>
                    <button class="btn btn-sm btn-outline-light" onclick="scrollToCategory('files')">Archivos</button>
                    <button class="btn btn-sm btn-outline-light" onclick="scrollToCategory('security')">Seguridad</button>
                    <button class="btn btn-sm btn-outline-light" onclick="scrollToCategory('registry')">Registro</button>
                    <button class="btn btn-sm btn-outline-light" onclick="scrollToCategory('utilities')">Utilidades</button>
                </div>
            </div>

            <!-- PROCESOS -->
            <div id="processes" class="category-section">
                <h6 class="text-green-400 font-bold mb-3">üîÑ GESTI√ìN DE PROCESOS</h6>
                
                <div class="cmd-item">
                    <div class="cmd-name">Get-Process</div>
                    <div class="cmd-syntax">Get-Process [-Name] &lt;string&gt; [-ComputerName] &lt;string&gt;</div>
                    <div class="cmd-description">Lista procesos en ejecuci√≥n. Usa -Name para filtrar, -ComputerName para equipos remotos.</div>
                </div>
                
                <div class="cmd-item">
                    <div class="cmd-name">Stop-Process</div>
                    <div class="cmd-syntax">Stop-Process -Name &lt;string&gt; | -Id &lt;int&gt; [-Force]</div>
                    <div class="cmd-description">Termina procesos por nombre o ID. -Force para terminaci√≥n forzada.</div>
                </div>

                <div class="cmd-item">
                    <div class="cmd-name">Start-Process</div>
                    <div class="cmd-syntax">Start-Process -FilePath &lt;string&gt; [-ArgumentList] &lt;string[]&gt;</div>
                    <div class="cmd-description">Inicia un nuevo proceso. -ArgumentList para pasar par√°metros.</div>
                </div>

                <div class="cmd-item">
                    <div class="cmd-name">Wait-Process</div>
                    <div class="cmd-syntax">Wait-Process -Name &lt;string&gt; [-Timeout] &lt;int&gt;</div>
                    <div class="cmd-description">Espera a que termine un proceso. -Timeout en segundos.</div>
                </div>
            </div>

            <!-- SERVICIOS -->
            <div id="services" class="category-section">
                <h6 class="text-blue-400 font-bold mb-3 mt-4">‚öôÔ∏è GESTI√ìN DE SERVICIOS</h6>
                
                <div class="cmd-item">
                    <div class="cmd-name">Get-Service</div>
                    <div class="cmd-syntax">Get-Service [-Name] &lt;string&gt; [-Status] &lt;string&gt;</div>
                    <div class="cmd-description">Lista servicios del sistema. -Status: Running, Stopped, StartPending.</div>
                </div>
                
                <div class="cmd-item">
                    <div class="cmd-name">Start-Service / Stop-Service</div>
                    <div class="cmd-syntax">Start-Service -Name &lt;string&gt; [-PassThru]</div>
                    <div class="cmd-description">Inicia/detiene servicios. -PassThru devuelve objeto de servicio.</div>
                </div>

                <div class="cmd-item">
                    <div class="cmd-name">Restart-Service</div>
                    <div class="cmd-syntax">Restart-Service -Name &lt;string&gt; [-Force]</div>
                    <div class="cmd-description">Reinicia un servicio. -Force para forzar el reinicio.</div>
                </div>

                <div class="cmd-item">
                    <div class="cmd-name">Set-Service</div>
                    <div class="cmd-syntax">Set-Service -Name &lt;string&gt; -StartupType &lt;string&gt;</div>
                    <div class="cmd-description">Modifica servicios. StartupType: Automatic, Manual, Disabled.</div>
                </div>

                <div class="cmd-item">
                    <div class="cmd-name">New-Service</div>
                    <div class="cmd-syntax">New-Service -Name &lt;string&gt; -BinaryPathName &lt;string&gt;</div>
                    <div class="cmd-description">Crea un nuevo servicio del sistema.</div>
                </div>
            </div>

            <!-- RED -->
            <div id="network" class="category-section">
                <h6 class="text-cyan-400 font-bold mb-3 mt-4">üåê AN√ÅLISIS DE RED</h6>
                
                <div class="cmd-item">
                    <div class="cmd-name">Get-NetTCPConnection</div>
                    <div class="cmd-syntax">Get-NetTCPConnection [-State] &lt;string&gt; [-RemotePort] &lt;int&gt;</div>
                    <div class="cmd-description">Conexiones TCP activas. Estados: Listen, Established, CloseWait, TimeWait.</div>
                </div>
                
                <div class="cmd-item">
                    <div class="cmd-name">Test-NetConnection</div>
                    <div class="cmd-syntax">Test-NetConnection -ComputerName &lt;string&gt; -Port &lt;int&gt;</div>
                    <div class="cmd-description">Prueba conectividad y puertos espec√≠ficos, equivalente a ping + telnet.</div>
                </div>

                <div class="cmd-item">
                    <div class="cmd-name">Get-NetAdapter</div>
                    <div class="cmd-syntax">Get-NetAdapter [-Name] &lt;string&gt; [-Physical]</div>
                    <div class="cmd-description">Lista adaptadores de red y su estado. -Physical solo f√≠sicos.</div>
                </div>

                <div class="cmd-item">
                    <div class="cmd-name">Get-NetIPConfiguration</div>
                    <div class="cmd-syntax">Get-NetIPConfiguration [-InterfaceAlias] &lt;string&gt;</div>
                    <div class="cmd-description">Configuraci√≥n IP de interfaces de red activas.</div>
                </div>

                <div class="cmd-item">
                    <div class="cmd-name">Resolve-DnsName</div>
                    <div class="cmd-syntax">Resolve-DnsName -Name &lt;string&gt; [-Type] &lt;string&gt;</div>
                    <div class="cmd-description">Resoluci√≥n DNS. Types: A, AAAA, MX, TXT, PTR, CNAME.</div>
                </div>

                <div class="cmd-item">
                    <div class="cmd-name">Test-Connection</div>
                    <div class="cmd-syntax">Test-Connection -ComputerName &lt;string&gt; [-Count] &lt;int&gt;</div>
                    <div class="cmd-description">Ping mejorado con estad√≠sticas detalladas.</div>
                </div>
            </div>

            <!-- SISTEMA -->
            <div id="system" class="category-section">
                <h6 class="text-yellow-400 font-bold mb-3 mt-4">üíª INFORMACI√ìN DEL SISTEMA</h6>
                
                <div class="cmd-item">
                    <div class="cmd-name">Get-WinEvent</div>
                    <div class="cmd-syntax">Get-WinEvent -FilterHashtable @{LogName='Security'; ID=4624}</div>
                    <div class="cmd-description">Logs de eventos. LogNames: System, Security, Application, Setup.</div>
                </div>
                
                <div class="cmd-item">
                    <div class="cmd-name">Get-CimInstance</div>
                    <div class="cmd-syntax">Get-CimInstance -ClassName Win32_OperatingSystem</div>
                    <div class="cmd-description">Informaci√≥n WMI. Classes: Win32_Process, Win32_Service, Win32_LogicalDisk.</div>
                </div>

                <div class="cmd-item">
                    <div class="cmd-name">Get-ComputerInfo</div>
                    <div class="cmd-syntax">Get-ComputerInfo [-Property] &lt;string[]&gt;</div>
                    <div class="cmd-description">Informaci√≥n completa del sistema: OS, hardware, memoria, etc.</div>
                </div>

                <div class="cmd-item">
                    <div class="cmd-name">Get-EventLog</div>
                    <div class="cmd-syntax">Get-EventLog -LogName &lt;string&gt; [-Newest] &lt;int&gt;</div>
                    <div class="cmd-description">Logs cl√°sicos de Windows. LogNames: System, Application, Security.</div>
                </div>

                <div class="cmd-item">
                    <div class="cmd-name">Get-HotFix</div>
                    <div class="cmd-syntax">Get-HotFix [-Id] &lt;string&gt; [-Description] &lt;string&gt;</div>
                    <div class="cmd-description">Parches y actualizaciones instaladas en el sistema.</div>
                </div>

                <div class="cmd-item">
                    <div class="cmd-name">Get-LocalUser / Get-LocalGroup</div>
                    <div class="cmd-syntax">Get-LocalUser [-Name] &lt;string&gt;</div>
                    <div class="cmd-description">Usuarios y grupos locales del sistema.</div>
                </div>
            </div>

            <!-- ARCHIVOS -->
            <div id="files" class="category-section">
                <h6 class="text-orange-400 font-bold mb-3 mt-4">üìÅ GESTI√ìN DE ARCHIVOS</h6>
                
                <div class="cmd-item">
                    <div class="cmd-name">Get-ChildItem</div>
                    <div class="cmd-syntax">Get-ChildItem -Path &lt;string&gt; -Recurse -Filter &lt;string&gt;</div>
                    <div class="cmd-description">Lista archivos y carpetas. -Recurse busca en subdirectorios.</div>
                </div>
                
                <div class="cmd-item">
                    <div class="cmd-name">Get-FileHash</div>
                    <div class="cmd-syntax">Get-FileHash -Path &lt;string&gt; -Algorithm SHA256</div>
                    <div class="cmd-description">Hash de archivos. Algoritmos: MD5, SHA1, SHA256, SHA384, SHA512.</div>
                </div>

                <div class="cmd-item">
                    <div class="cmd-name">Get-Content / Set-Content</div>
                    <div class="cmd-syntax">Get-Content -Path &lt;string&gt; [-Tail] &lt;int&gt;</div>
                    <div class="cmd-description">Lee/escribe contenido de archivos. -Tail para √∫ltimas l√≠neas.</div>
                </div>

                <div class="cmd-item">
                    <div class="cmd-name">Copy-Item / Move-Item</div>
                    <div class="cmd-syntax">Copy-Item -Path &lt;string&gt; -Destination &lt;string&gt; [-Recurse]</div>
                    <div class="cmd-description">Copia/mueve archivos y carpetas. -Recurse para subdirectorios.</div>
                </div>

                <div class="cmd-item">
                    <div class="cmd-name">Remove-Item</div>
                    <div class="cmd-syntax">Remove-Item -Path &lt;string&gt; [-Recurse] [-Force]</div>
                    <div class="cmd-description">Elimina archivos y carpetas. -Force para elementos protegidos.</div>
                </div>

                <div class="cmd-item">
                    <div class="cmd-name">Test-Path</div>
                    <div class="cmd-syntax">Test-Path -Path &lt;string&gt; [-PathType] &lt;string&gt;</div>
                    <div class="cmd-description">Verifica existencia. PathType: Leaf (archivo), Container (carpeta).</div>
                </div>
            </div>

            <!-- SEGURIDAD -->
            <div id="security" class="category-section">
                <h6 class="text-red-400 font-bold mb-3 mt-4">üõ°Ô∏è COMANDOS DE SEGURIDAD</h6>
                
                <div class="cmd-item">
                    <div class="cmd-name">Get-ExecutionPolicy</div>
                    <div class="cmd-syntax">Get-ExecutionPolicy [-Scope] &lt;string&gt; [-List]</div>
                    <div class="cmd-description">Pol√≠tica de ejecuci√≥n actual. Scopes: Process, CurrentUser, LocalMachine.</div>
                </div>

                <div class="cmd-item">
                    <div class="cmd-name">Set-ExecutionPolicy</div>
                    <div class="cmd-syntax">Set-ExecutionPolicy &lt;string&gt; -Scope &lt;string&gt;</div>
                    <div class="cmd-description">Cambia pol√≠tica. Valores: Restricted, RemoteSigned, Unrestricted.</div>
                </div>

                <div class="cmd-item">
                    <div class="cmd-name">Get-Acl / Set-Acl</div>
                    <div class="cmd-syntax">Get-Acl -Path &lt;string&gt;</div>
                    <div class="cmd-description">Permisos de archivos y carpetas (Access Control List).</div>
                </div>

                <div class="cmd-item">
                    <div class="cmd-name">ConvertTo-SecureString</div>
                    <div class="cmd-syntax">ConvertTo-SecureString -String &lt;string&gt; -AsPlainText</div>
                    <div class="cmd-description">Convierte strings a SecureString para passwords seguros.</div>
                </div>

                <div class="cmd-item">
                    <div class="cmd-name">Get-AuthenticodeSignature</div>
                    <div class="cmd-syntax">Get-AuthenticodeSignature -FilePath &lt;string&gt;</div>
                    <div class="cmd-description">Verifica firmas digitales de archivos ejecutables.</div>
                </div>
            </div>

            <!-- REGISTRO -->
            <div id="registry" class="category-section">
                <h6 class="text-purple-400 font-bold mb-3 mt-4">üìã REGISTRO DE WINDOWS</h6>
                
                <div class="cmd-item">
                    <div class="cmd-name">Get-ItemProperty</div>
                    <div class="cmd-syntax">Get-ItemProperty -Path &lt;string&gt; [-Name] &lt;string&gt;</div>
                    <div class="cmd-description">Lee valores del registro. Paths: HKLM:\, HKCU:\, HKCR:\</div>
                </div>

                <div class="cmd-item">
                    <div class="cmd-name">Set-ItemProperty</div>
                    <div class="cmd-syntax">Set-ItemProperty -Path &lt;string&gt; -Name &lt;string&gt; -Value &lt;object&gt;</div>
                    <div class="cmd-description">Modifica valores del registro de Windows.</div>
                </div>

                <div class="cmd-item">
                    <div class="cmd-name">New-Item / Remove-Item</div>
                    <div class="cmd-syntax">New-Item -Path &lt;string&gt; -ItemType Directory</div>
                    <div class="cmd-description">Crea/elimina claves del registro. ItemType: Directory para claves.</div>
                </div>

                <div class="cmd-item">
                    <div class="cmd-name">Test-Path</div>
                    <div class="cmd-syntax">Test-Path -Path "HKLM:\SOFTWARE\Microsoft"</div>
                    <div class="cmd-description">Verifica existencia de claves del registro.</div>
                </div>
            </div>

            <!-- UTILIDADES -->
            <div id="utilities" class="category-section">
                <h6 class="text-pink-400 font-bold mb-3 mt-4">üîß UTILIDADES ESENCIALES</h6>
                
                <div class="cmd-item">
                    <div class="cmd-name">Where-Object</div>
                    <div class="cmd-syntax">... | Where-Object { $_.Property -eq "Value" }</div>
                    <div class="cmd-description">Filtra objetos. Operadores: -eq, -ne, -gt, -lt, -like, -match.</div>
                </div>

                <div class="cmd-item">
                    <div class="cmd-name">Select-Object</div>
                    <div class="cmd-syntax">... | Select-Object Property1, Property2 [-First] &lt;int&gt;</div>
                    <div class="cmd-description">Selecciona propiedades espec√≠ficas. -First/-Last para l√≠mites.</div>
                </div>

                <div class="cmd-item">
                    <div class="cmd-name">Sort-Object</div>
                    <div class="cmd-syntax">... | Sort-Object Property [-Descending] [-Unique]</div>
                    <div class="cmd-description">Ordena objetos por propiedades. -Unique elimina duplicados.</div>
                </div>

                <div class="cmd-item">
                    <div class="cmd-name">Group-Object</div>
                    <div class="cmd-syntax">... | Group-Object Property [-NoElement]</div>
                    <div class="cmd-description">Agrupa objetos por propiedades comunes.</div>
                </div>

                <div class="cmd-item">
                    <div class="cmd-name">Measure-Object</div>
                    <div class="cmd-syntax">... | Measure-Object [-Property] &lt;string&gt; [-Sum] [-Average]</div>
                    <div class="cmd-description">Calcula estad√≠sticas: Count, Sum, Average, Min, Max.</div>
                </div>

                <div class="cmd-item">
                    <div class="cmd-name">ForEach-Object</div>
                    <div class="cmd-syntax">... | ForEach-Object { $_.Property }</div>
                    <div class="cmd-description">Ejecuta operaciones en cada objeto del pipeline.</div>
                </div>

                <div class="cmd-item">
                    <div class="cmd-name">Out-File / Out-GridView</div>
                    <div class="cmd-syntax">... | Out-File -FilePath &lt;string&gt; [-Append]</div>
                    <div class="cmd-description">Exporta a archivo o ventana gr√°fica interactiva.</div>
                </div>

                <div class="cmd-item">
                    <div class="cmd-name">Export-Csv / Import-Csv</div>
                    <div class="cmd-syntax">... | Export-Csv -Path &lt;string&gt; [-NoTypeInformation]</div>
                    <div class="cmd-description">Exporta/importa datos en formato CSV.</div>
                </div>

                <div class="cmd-item">
                    <div class="cmd-name">ConvertTo-Json / ConvertFrom-Json</div>
                    <div class="cmd-syntax">... | ConvertTo-Json [-Depth] &lt;int&gt;</div>
                    <div class="cmd-description">Convierte objetos a/desde formato JSON.</div>
                </div>

                <div class="cmd-item">
                    <div class="cmd-name">Invoke-Expression</div>
                    <div class="cmd-syntax">Invoke-Expression -Command &lt;string&gt;</div>
                    <div class="cmd-description">Ejecuta strings como comandos PowerShell. ¬°Usar con precauci√≥n!</div>
                </div>
            </div>
        </div>
    </div>

    <div class="container">
        <!-- Encabezado -->
        <header class="text-center my-12">
            <h1 class="header-glitch">LABORATORIO PS-PR√ÅCTICAS</h1>
            <p class="text-xl mt-4">Ejercicios T√°cticos de PowerShell - Campo de Entrenamiento</p>
            <button class="mt-4 bg-purple-600 hover:bg-purple-700" data-bs-toggle="offcanvas" data-bs-target="#commandsReference">
                üìñ Abrir Arsenal de Comandos
            </button>
        </header>
           <!-- nvabar a otros recursos -->
           <nav class="flex flex-wrap justify-center gap-6 mt-8 mb-8 p-6 bg-gray-900 bg-opacity-50 border border-purple-500 rounded-lg backdrop-blur-sm">
            <a href="/" class="px-4 py-2 bg-gradient-to-r from-blue-600 to-blue-700 text-white rounded-lg hover:from-blue-700 hover:to-blue-800 transition-all duration-300 transform hover:scale-105 shadow-lg hover:shadow-blue-500/25">
                üè† PORTAL
            </a>
            <a href="/lessons/powershell/pw_anatomia" target="_blank" class="px-4 py-2 bg-gradient-to-r from-purple-600 to-purple-700 text-white rounded-lg hover:from-purple-700 hover:to-purple-800 transition-all duration-300 transform hover:scale-105 shadow-lg hover:shadow-purple-500/25">
                üìã Anatom√≠a de PowerShell
            </a>
            <a href="/powershell" class="px-4 py-2 bg-gradient-to-r from-green-600 to-green-700 text-white rounded-lg hover:from-green-700 hover:to-green-800 transition-all duration-300 transform hover:scale-105 shadow-lg hover:shadow-green-500/25" target="_blank">
                üíª Introducci√≥n a PowerShell
            </a>
         
        </nav>

        <!-- Ejercicios de Procesos -->
        <section id="process-exercises" class="mb-12">
            <h2 class="section-title">> M√≥dulo 1: Operaciones de Procesos</h2>
            
            <div class="card">
                <div class="exercise-container">
                    <h3 class="exercise-title">üéØ Ejercicio 1: Cazador de Recursos <span class="challenge-badge badge-easy">F√ÅCIL</span></h3>
                    <p><strong>Misi√≥n:</strong> Encuentra todos los procesos que consuman m√°s de 100 MB de memoria RAM.</p>
                    <div class="mt-4">
                        <h4 class="text-lg font-bold text-cyan-400 mb-2">Pasos:</h4>
                        <ol class="list-decimal list-inside text-gray-300 space-y-2">
                            <li>Lista todos los procesos en ejecuci√≥n</li>
                            <li>Filtra los que tengan WorkingSet mayor a 100MB (104857600 bytes)</li>
                            <li>Ordena por consumo de memoria descendente</li>
                            <li>Muestra solo Nombre, ID y WorkingSet</li>
                        </ol>
                        <div class="mt-4 p-3 bg-yellow-900 bg-opacity-30 border-l-4 border-yellow-500 rounded">
                            <p class="text-yellow-300 text-sm"><strong>üí° Pista:</strong> Usa Where-Object con la propiedad WorkingSet y Sort-Object</p>
                        </div>
                        
                        <!-- Campo de Respuesta -->
                        <div class="mt-4">
                            <button class="response-btn" onclick="toggleResponse('response-1')" style="background-color: #bd93f9; color: #282a36; padding: 0.5rem 1rem; border: none; border-radius: 4px; font-weight: bold; cursor: pointer; transition: all 0.3s; text-shadow: none;">
                                üìù Respuesta
                            </button>
                            <div id="response-1" class="response-area mt-3" style="display: none;">
                                <textarea class="response-textarea" placeholder="Escribe aqu√≠ tu script de PowerShell para resolver este ejercicio..."
                                    style="width: 100%; min-height: 120px; background-color: #282a36; color: #f8f8f2; border: 2px solid #bd93f9; border-radius: 6px; padding: 1rem; font-family: 'Fira Code', monospace; font-size: 0.9rem; resize: vertical; text-shadow: none;"></textarea>
                                <div class="mt-2 text-right">
                                    <button onclick="clearResponse('response-1')" style="background-color: #ff5555; color: #f8f8f2; padding: 0.25rem 0.75rem; border: none; border-radius: 4px; font-size: 0.8rem; cursor: pointer; margin-right: 0.5rem; text-shadow: none;">Limpiar</button>
                                    <button onclick="saveResponse('response-1')" style="background-color: #50fa7b; color: #282a36; padding: 0.25rem 0.75rem; border: none; border-radius: 4px; font-size: 0.8rem; cursor: pointer; text-shadow: none;">Guardar</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="exercise-container">
                    <h3 class="exercise-title">üî´ Ejercicio 2: Terminador Selectivo <span class="challenge-badge badge-medium">MEDIO</span></h3>
                    <p><strong>Misi√≥n:</strong> Crear un script que termine todos los procesos de Notepad, pero solo si hay m√°s de 3 instancias.</p>
                    <div class="mt-4">
                        <h4 class="text-lg font-bold text-cyan-400 mb-2">Requisitos:</h4>
                        <ul class="list-disc list-inside text-gray-300 space-y-2">
                            <li>Antes de terminar, mostrar cu√°ntas instancias hay</li>
                            <li>Confirmar con el usuario antes de terminar</li>
                            <li>Mostrar mensaje de √©xito o fracaso</li>
                            <li>Manejar errores si no hay permisos</li>
                        </ul>
                        <pre class="mt-4"><span class="comment"># Ejemplo de estructura</span>
<span class="variable">$notepads</span> = <span class="command">Get-Process</span> <span class="parameter">-Name</span> <span class="string">"notepad"</span> <span class="parameter">-ErrorAction</span> <span class="string">SilentlyContinue</span>
<span class="keyword">if</span> (<span class="variable">$notepads</span>.<span class="property">Count</span> <span class="operator">-gt</span> 3) {
    <span class="comment"># Tu c√≥digo aqu√≠</span>
}</pre>
                        
                        <!-- Campo de Respuesta -->
                        <div class="mt-4">
                            <button class="response-btn" onclick="toggleResponse('response-2')" style="background-color: #bd93f9; color: #282a36; padding: 0.5rem 1rem; border: none; border-radius: 4px; font-weight: bold; cursor: pointer; transition: all 0.3s; text-shadow: none;">
                                üìù Respuesta
                            </button>
                            <div id="response-2" class="response-area mt-3" style="display: none;">
                                <textarea class="response-textarea" placeholder="Escribe aqu√≠ tu script de PowerShell para resolver este ejercicio..."
                                    style="width: 100%; min-height: 120px; background-color: #282a36; color: #f8f8f2; border: 2px solid #bd93f9; border-radius: 6px; padding: 1rem; font-family: 'Fira Code', monospace; font-size: 0.9rem; resize: vertical; text-shadow: none;"></textarea>
                                <div class="mt-2 text-right">
                                    <button onclick="clearResponse('response-2')" style="background-color: #ff5555; color: #f8f8f2; padding: 0.25rem 0.75rem; border: none; border-radius: 4px; font-size: 0.8rem; cursor: pointer; margin-right: 0.5rem; text-shadow: none;">Limpiar</button>
                                    <button onclick="saveResponse('response-2')" style="background-color: #50fa7b; color: #282a36; padding: 0.25rem 0.75rem; border: none; border-radius: 4px; font-size: 0.8rem; cursor: pointer; text-shadow: none;">Guardar</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="exercise-container">
                    <h3 class="exercise-title">üëÅÔ∏è Ejercicio 3: Monitor en Tiempo Real <span class="challenge-badge badge-hard">DIF√çCIL</span></h3>
                    <p><strong>Misi√≥n:</strong> Script de monitoreo que detecte procesos sospechosos ejecut√°ndose desde ubicaciones no est√°ndar.</p>
                    <div class="mt-4">
                        <h4 class="text-lg font-bold text-cyan-400 mb-2">Especificaciones:</h4>
                        <ul class="list-disc list-inside text-gray-300 space-y-2">
                            <li>Monitorear cada 10 segundos</li>
                            <li>Alertar sobre procesos en: Temp, Downloads, Desktop</li>
                            <li>Mostrar: Nombre, PID, Ruta, Tiempo de inicio</li>
                            <li>Guardar alertas en archivo de log</li>
                            <li>Continuar hasta presionar Ctrl+C</li>
                        </ul>
                        <div class="mt-4 p-3 bg-red-900 bg-opacity-30 border-l-4 border-red-500 rounded">
                            <p class="text-red-300 text-sm"><strong>‚ö†Ô∏è Nota:</strong> Usa While loop y Start-Sleep para el monitoreo continuo</p>
                        </div>
                        
                        <!-- Campo de Respuesta -->
                        <div class="mt-4">
                            <button class="response-btn" onclick="toggleResponse('response-3')" style="background-color: #bd93f9; color: #282a36; padding: 0.5rem 1rem; border: none; border-radius: 4px; font-weight: bold; cursor: pointer; transition: all 0.3s; text-shadow: none;">
                                üìù Respuesta
                            </button>
                            <div id="response-3" class="response-area mt-3" style="display: none;">
                                <textarea class="response-textarea" placeholder="Escribe aqu√≠ tu script de PowerShell para resolver este ejercicio..."
                                    style="width: 100%; min-height: 150px; background-color: #282a36; color: #f8f8f2; border: 2px solid #bd93f9; border-radius: 6px; padding: 1rem; font-family: 'Fira Code', monospace; font-size: 0.9rem; resize: vertical; text-shadow: none;"></textarea>
                                <div class="mt-2 text-right">
                                    <button onclick="clearResponse('response-3')" style="background-color: #ff5555; color: #f8f8f2; padding: 0.25rem 0.75rem; border: none; border-radius: 4px; font-size: 0.8rem; cursor: pointer; margin-right: 0.5rem; text-shadow: none;">Limpiar</button>
                                    <button onclick="saveResponse('response-3')" style="background-color: #50fa7b; color: #282a36; padding: 0.25rem 0.75rem; border: none; border-radius: 4px; font-size: 0.8rem; cursor: pointer; text-shadow: none;">Guardar</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Ejercicios de Servicios -->
        <section id="service-exercises" class="mb-12">
            <h2 class="section-title">> M√≥dulo 2: Control de Servicios</h2>
            
            <div class="card">
                <div class="exercise-container">
                    <h3 class="exercise-title">üîß Ejercicio 4: Auditor de Servicios <span class="challenge-badge badge-easy">F√ÅCIL</span></h3>
                    <p><strong>Misi√≥n:</strong> Crear reporte de servicios cr√≠ticos del sistema.</p>
                    <div class="mt-4">
                        <h4 class="text-lg font-bold text-cyan-400 mb-2">Lista de servicios cr√≠ticos:</h4>
                        <pre><span class="variable">$serviciosCriticos</span> = @(
    <span class="string">"BITS"</span>, <span class="string">"Spooler"</span>, <span class="string">"Themes"</span>, <span class="string">"AudioSrv"</span>, 
    <span class="string">"Dhcp"</span>, <span class="string">"Dnscache"</span>, <span class="string">"EventLog"</span>, <span class="string">"Winmgmt"</span>
)</pre>
                        <ul class="list-disc list-inside text-gray-300 space-y-2 mt-4">
                            <li>Para cada servicio, mostrar: Nombre, Estado, Tipo de inicio</li>
                            <li>Identificar servicios detenidos que deber√≠an estar corriendo</li>
                            <li>Exportar reporte a CSV en C:\Temp\ServiciosReporte.csv</li>
                        </ul>
                        
                        <!-- Campo de Respuesta -->
                        <div class="mt-4">
                            <button class="response-btn" onclick="toggleResponse('response-4')" style="background-color: #bd93f9; color: #282a36; padding: 0.5rem 1rem; border: none; border-radius: 4px; font-weight: bold; cursor: pointer; transition: all 0.3s; text-shadow: none;">
                                üìù Respuesta
                            </button>
                            <div id="response-4" class="response-area mt-3" style="display: none;">
                                <textarea class="response-textarea" placeholder="Escribe aqu√≠ tu script de PowerShell para resolver este ejercicio..."
                                    style="width: 100%; min-height: 120px; background-color: #282a36; color: #f8f8f2; border: 2px solid #bd93f9; border-radius: 6px; padding: 1rem; font-family: 'Fira Code', monospace; font-size: 0.9rem; resize: vertical; text-shadow: none;"></textarea>
                                <div class="mt-2 text-right">
                                    <button onclick="clearResponse('response-4')" style="background-color: #ff5555; color: #f8f8f2; padding: 0.25rem 0.75rem; border: none; border-radius: 4px; font-size: 0.8rem; cursor: pointer; margin-right: 0.5rem; text-shadow: none;">Limpiar</button>
                                    <button onclick="saveResponse('response-4')" style="background-color: #50fa7b; color: #282a36; padding: 0.25rem 0.75rem; border: none; border-radius: 4px; font-size: 0.8rem; cursor: pointer; text-shadow: none;">Guardar</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="exercise-container">
                    <h3 class="exercise-title">üöÄ Ejercicio 5: Gestor de Servicios Autom√°tico <span class="challenge-badge badge-medium">MEDIO</span></h3>
                    <p><strong>Misi√≥n:</strong> Script que reinicie autom√°ticamente servicios ca√≠dos importantes.</p>
                    <div class="mt-4">
                        <h4 class="text-lg font-bold text-cyan-400 mb-2">Funcionalidades:</h4>
                        <ul class="list-disc list-inside text-gray-300 space-y-2">
                            <li>Verificar lista de servicios cada 30 segundos</li>
                            <li>Intentar reiniciar servicios detenidos autom√°ticamente</li>
                            <li>Llevar log de todas las acciones con timestamps</li>
                            <li>Enviar alerta si un servicio falla 3 veces consecutivas</li>
                            <li>Opci√≥n de ejecutar como tarea programada</li>
                        </ul>
                        
                        <!-- Campo de Respuesta -->
                        <div class="mt-4">
                            <button class="response-btn" onclick="toggleResponse('response-5')" style="background-color: #bd93f9; color: #282a36; padding: 0.5rem 1rem; border: none; border-radius: 4px; font-weight: bold; cursor: pointer; transition: all 0.3s; text-shadow: none;">
                                üìù Respuesta
                            </button>
                            <div id="response-5" class="response-area mt-3" style="display: none;">
                                <textarea class="response-textarea" placeholder="Escribe aqu√≠ tu script de PowerShell para resolver este ejercicio..."
                                    style="width: 100%; min-height: 140px; background-color: #282a36; color: #f8f8f2; border: 2px solid #bd93f9; border-radius: 6px; padding: 1rem; font-family: 'Fira Code', monospace; font-size: 0.9rem; resize: vertical; text-shadow: none;"></textarea>
                                <div class="mt-2 text-right">
                                    <button onclick="clearResponse('response-5')" style="background-color: #ff5555; color: #f8f8f2; padding: 0.25rem 0.75rem; border: none; border-radius: 4px; font-size: 0.8rem; cursor: pointer; margin-right: 0.5rem; text-shadow: none;">Limpiar</button>
                                    <button onclick="saveResponse('response-5')" style="background-color: #50fa7b; color: #282a36; padding: 0.25rem 0.75rem; border: none; border-radius: 4px; font-size: 0.8rem; cursor: pointer; text-shadow: none;">Guardar</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="exercise-container">
                    <h3 class="exercise-title">üõ°Ô∏è Ejercicio 6: Detector de Servicios Maliciosos <span class="challenge-badge badge-expert">EXPERTO</span></h3>
                    <p><strong>Misi√≥n:</strong> Identificar servicios potencialmente maliciosos en el sistema.</p>
                    <div class="mt-4">
                        <h4 class="text-lg font-bold text-cyan-400 mb-2">Criterios de detecci√≥n:</h4>
                        <ul class="list-disc list-inside text-gray-300 space-y-2">
                            <li>Servicios sin descripci√≥n o con descripciones gen√©ricas</li>
                            <li>Servicios ejecut√°ndose desde ubicaciones sospechosas</li>
                            <li>Servicios con nombres similares a servicios leg√≠timos</li>
                            <li>Servicios instalados recientemente (√∫ltima semana)</li>
                            <li>Servicios no firmados digitalmente</li>
                        </ul>
                        <div class="mt-4 p-3 bg-purple-900 bg-opacity-30 border-l-4 border-purple-500 rounded">
                            <p class="text-purple-300 text-sm"><strong>üéØ Challenge:</strong> Implementa sistema de scoring para ranking de amenazas</p>
                        </div>
                        
                        <!-- Campo de Respuesta -->
                        <div class="mt-4">
                            <button class="response-btn" onclick="toggleResponse('response-6')" style="background-color: #bd93f9; color: #282a36; padding: 0.5rem 1rem; border: none; border-radius: 4px; font-weight: bold; cursor: pointer; transition: all 0.3s; text-shadow: none;">
                                üìù Respuesta
                            </button>
                            <div id="response-6" class="response-area mt-3" style="display: none;">
                                <textarea class="response-textarea" placeholder="Escribe aqu√≠ tu script de PowerShell para resolver este ejercicio..."
                                    style="width: 100%; min-height: 160px; background-color: #282a36; color: #f8f8f2; border: 2px solid #bd93f9; border-radius: 6px; padding: 1rem; font-family: 'Fira Code', monospace; font-size: 0.9rem; resize: vertical; text-shadow: none;"></textarea>
                                <div class="mt-2 text-right">
                                    <button onclick="clearResponse('response-6')" style="background-color: #ff5555; color: #f8f8f2; padding: 0.25rem 0.75rem; border: none; border-radius: 4px; font-size: 0.8rem; cursor: pointer; margin-right: 0.5rem; text-shadow: none;">Limpiar</button>
                                    <button onclick="saveResponse('response-6')" style="background-color: #50fa7b; color: #282a36; padding: 0.25rem 0.75rem; border: none; border-radius: 4px; font-size: 0.8rem; cursor: pointer; text-shadow: none;">Guardar</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Ejercicios de Red -->
        <section id="network-exercises" class="mb-12">
            <h2 class="section-title">> M√≥dulo 3: An√°lisis de Red</h2>
            
            <div class="card">
                <div class="exercise-container">
                    <h3 class="exercise-title">üåê Ejercicio 7: Scanner de Puertos B√°sico <span class="challenge-badge badge-medium">MEDIO</span></h3>
                    <p><strong>Misi√≥n:</strong> Crear scanner de puertos usando Test-NetConnection.</p>
                    <div class="mt-4">
                        <h4 class="text-lg font-bold text-cyan-400 mb-2">Especificaciones:</h4>
                        <ul class="list-disc list-inside text-gray-300 space-y-2">
                            <li>Escanear puertos comunes: 21, 22, 23, 25, 53, 80, 110, 143, 443, 993, 995</li>
                            <li>Permitir especificar IP o hostname objetivo</li>
                            <li>Mostrar estado: Abierto/Cerrado/Filtrado</li>
                            <li>Medir tiempo de respuesta</li>
                            <li>Exportar resultados a archivo</li>
                        </ul>
                        <pre class="mt-4"><span class="comment"># Estructura base</span>
<span class="variable">$target</span> = <span class="string">"google.com"</span>
<span class="variable">$ports</span> = @(80, 443, 22, 21)
<span class="keyword">foreach</span> (<span class="variable">$port</span> <span class="keyword">in</span> <span class="variable">$ports</span>) {
    <span class="comment"># Implementar escaneo</span>
}</pre>
                        
                        <!-- Campo de Respuesta -->
                        <div class="mt-4">
                            <button class="response-btn" onclick="toggleResponse('response-7')" style="background-color: #bd93f9; color: #282a36; padding: 0.5rem 1rem; border: none; border-radius: 4px; font-weight: bold; cursor: pointer; transition: all 0.3s; text-shadow: none;">
                                üìù Respuesta
                            </button>
                            <div id="response-7" class="response-area mt-3" style="display: none;">
                                <textarea class="response-textarea" placeholder="Escribe aqu√≠ tu script de PowerShell para resolver este ejercicio..."
                                    style="width: 100%; min-height: 130px; background-color: #282a36; color: #f8f8f2; border: 2px solid #bd93f9; border-radius: 6px; padding: 1rem; font-family: 'Fira Code', monospace; font-size: 0.9rem; resize: vertical; text-shadow: none;"></textarea>
                                <div class="mt-2 text-right">
                                    <button onclick="clearResponse('response-7')" style="background-color: #ff5555; color: #f8f8f2; padding: 0.25rem 0.75rem; border: none; border-radius: 4px; font-size: 0.8rem; cursor: pointer; margin-right: 0.5rem; text-shadow: none;">Limpiar</button>
                                    <button onclick="saveResponse('response-7')" style="background-color: #50fa7b; color: #282a36; padding: 0.25rem 0.75rem; border: none; border-radius: 4px; font-size: 0.8rem; cursor: pointer; text-shadow: none;">Guardar</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="exercise-container">
                    <h3 class="exercise-title">üïµÔ∏è Ejercicio 8: Detective de Conexiones <span class="challenge-badge badge-hard">DIF√çCIL</span></h3>
                    <p><strong>Misi√≥n:</strong> Analizar conexiones de red activas y detectar actividad sospechosa.</p>
                    <div class="mt-4">
                        <h4 class="text-lg font-bold text-cyan-400 mb-2">Tareas:</h4>
                        <ul class="list-disc list-inside text-gray-300 space-y-2">
                            <li>Listar conexiones establecidas a IPs externas</li>
                            <li>Identificar el proceso responsable de cada conexi√≥n</li>
                            <li>Detectar conexiones a pa√≠ses de alto riesgo</li>
                            <li>Alertar sobre puertos no est√°ndar en uso</li>
                            <li>Generar mapa visual de conexiones</li>
                        </ul>
                        <div class="mt-4 p-3 bg-blue-900 bg-opacity-30 border-l-4 border-blue-500 rounded">
                            <p class="text-blue-300 text-sm"><strong>üí° Tip:</strong> Usa APIs de geolocalizaci√≥n para determinar pa√≠ses</p>
                        </div>
                        
                        <!-- Campo de Respuesta -->
                        <div class="mt-4">
                            <button class="response-btn" onclick="toggleResponse('response-8')" style="background-color: #bd93f9; color: #282a36; padding: 0.5rem 1rem; border: none; border-radius: 4px; font-weight: bold; cursor: pointer; transition: all 0.3s; text-shadow: none;">
                                üìù Respuesta
                            </button>
                            <div id="response-8" class="response-area mt-3" style="display: none;">
                                <textarea class="response-textarea" placeholder="Escribe aqu√≠ tu script de PowerShell para resolver este ejercicio..."
                                    style="width: 100%; min-height: 150px; background-color: #282a36; color: #f8f8f2; border: 2px solid #bd93f9; border-radius: 6px; padding: 1rem; font-family: 'Fira Code', monospace; font-size: 0.9rem; resize: vertical; text-shadow: none;"></textarea>
                                <div class="mt-2 text-right">
                                    <button onclick="clearResponse('response-8')" style="background-color: #ff5555; color: #f8f8f2; padding: 0.25rem 0.75rem; border: none; border-radius: 4px; font-size: 0.8rem; cursor: pointer; margin-right: 0.5rem; text-shadow: none;">Limpiar</button>
                                    <button onclick="saveResponse('response-8')" style="background-color: #50fa7b; color: #282a36; padding: 0.25rem 0.75rem; border: none; border-radius: 4px; font-size: 0.8rem; cursor: pointer; text-shadow: none;">Guardar</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Ejercicios de Seguridad -->
        <section id="security-exercises" class="mb-12">
            <h2 class="section-title">> M√≥dulo 4: Ciberseguridad Avanzada</h2>
            
            <div class="card">
                <div class="exercise-container">
                    <h3 class="exercise-title">üîç Ejercicio 9: Forense de Archivos <span class="challenge-badge badge-medium">MEDIO</span></h3>
                    <p><strong>Misi√≥n:</strong> Investigar archivos modificados recientemente en el sistema.</p>
                    <div class="mt-4">
                        <h4 class="text-lg font-bold text-cyan-400 mb-2">Investigaci√≥n:</h4>
                        <ul class="list-disc list-inside text-gray-300 space-y-2">
                            <li>Buscar archivos modificados en las √∫ltimas 24 horas</li>
                            <li>Enfocar en: Documents, Downloads, Desktop, Temp</li>
                            <li>Calcular hash SHA256 de archivos ejecutables</li>
                            <li>Detectar archivos con extensiones dobles (.txt.exe)</li>
                            <li>Crear timeline de actividad</li>
                        </ul>
                        
                        <!-- Campo de Respuesta -->
                        <div class="mt-4">
                            <button class="response-btn" onclick="toggleResponse('response-9')" style="background-color: #bd93f9; color: #282a36; padding: 0.5rem 1rem; border: none; border-radius: 4px; font-weight: bold; cursor: pointer; transition: all 0.3s; text-shadow: none;">
                                üìù Respuesta
                            </button>
                            <div id="response-9" class="response-area mt-3" style="display: none;">
                                <textarea class="response-textarea" placeholder="Escribe aqu√≠ tu script de PowerShell para resolver este ejercicio..."
                                    style="width: 100%; min-height: 130px; background-color: #282a36; color: #f8f8f2; border: 2px solid #bd93f9; border-radius: 6px; padding: 1rem; font-family: 'Fira Code', monospace; font-size: 0.9rem; resize: vertical; text-shadow: none;"></textarea>
                                <div class="mt-2 text-right">
                                    <button onclick="clearResponse('response-9')" style="background-color: #ff5555; color: #f8f8f2; padding: 0.25rem 0.75rem; border: none; border-radius: 4px; font-size: 0.8rem; cursor: pointer; margin-right: 0.5rem; text-shadow: none;">Limpiar</button>
                                    <button onclick="saveResponse('response-9')" style="background-color: #50fa7b; color: #282a36; padding: 0.25rem 0.75rem; border: none; border-radius: 4px; font-size: 0.8rem; cursor: pointer; text-shadow: none;">Guardar</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="exercise-container">
                    <h3 class="exercise-title">üö® Ejercicio 10: Centro de Respuesta a Incidentes <span class="challenge-badge badge-expert">EXPERTO</span></h3>
                    <p><strong>Misi√≥n:</strong> Sistema completo de respuesta autom√°tica a incidentes de seguridad.</p>
                    <div class="mt-4">
                        <h4 class="text-lg font-bold text-cyan-400 mb-2">M√≥dulos del sistema:</h4>
                        <ul class="list-disc list-inside text-gray-300 space-y-2">
                            <li><strong>Detector:</strong> Monitorear eventos 4625, 4624, 7045 en tiempo real</li>
                            <li><strong>Analizador:</strong> Correlacionar eventos sospechosos</li>
                            <li><strong>Respondedor:</strong> Acciones autom√°ticas (bloqueo, aislamiento)</li>
                            <li><strong>Reportero:</strong> Alertas por email y logs detallados</li>
                            <li><strong>Dashboard:</strong> Vista en tiempo real del estado de seguridad</li>
                        </ul>
                        <div class="mt-4 p-3 bg-red-900 bg-opacity-30 border-l-4 border-red-500 rounded">
                            <p class="text-red-300 text-sm"><strong>‚ö° Mega Challenge:</strong> Implementa machine learning b√°sico para detecci√≥n de anomal√≠as</p>
                        </div>
                        
                        <!-- Campo de Respuesta -->
                        <div class="mt-4">
                            <button class="response-btn" onclick="toggleResponse('response-10')" style="background-color: #bd93f9; color: #282a36; padding: 0.5rem 1rem; border: none; border-radius: 4px; font-weight: bold; cursor: pointer; transition: all 0.3s; text-shadow: none;">
                                üìù Respuesta
                            </button>
                            <div id="response-10" class="response-area mt-3" style="display: none;">
                                <textarea class="response-textarea" placeholder="Escribe aqu√≠ tu script de PowerShell para resolver este ejercicio..."
                                    style="width: 100%; min-height: 180px; background-color: #282a36; color: #f8f8f2; border: 2px solid #bd93f9; border-radius: 6px; padding: 1rem; font-family: 'Fira Code', monospace; font-size: 0.9rem; resize: vertical; text-shadow: none;"></textarea>
                                <div class="mt-2 text-right">
                                    <button onclick="clearResponse('response-10')" style="background-color: #ff5555; color: #f8f8f2; padding: 0.25rem 0.75rem; border: none; border-radius: 4px; font-size: 0.8rem; cursor: pointer; margin-right: 0.5rem; text-shadow: none;">Limpiar</button>
                                    <button onclick="saveResponse('response-10')" style="background-color: #50fa7b; color: #282a36; padding: 0.25rem 0.75rem; border: none; border-radius: 4px; font-size: 0.8rem; cursor: pointer; text-shadow: none;">Guardar</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Casos de Uso del Mundo Real -->
        <section id="real-world-cases" class="mb-12">
            <h2 class="section-title">> M√≥dulo 5: Casos de Uso Reales</h2>
            
            <div class="card">
                <div class="exercise-container">
                    <h3 class="exercise-title">üè¢ Caso 1: Administraci√≥n de Servidores</h3>
                    <p><strong>Escenario:</strong> Eres administrador de una empresa con 50 servidores Windows.</p>
                    <div class="mt-4">
                        <h4 class="text-lg font-bold text-cyan-400 mb-2">Desaf√≠os diarios:</h4>
                        <ol class="list-decimal list-inside text-gray-300 space-y-2">
                            <li>Verificar estado de servicios cr√≠ticos en todos los servidores</li>
                            <li>Recopilar uso de CPU/RAM de cada servidor</li>
                            <li>Detectar servidores con poco espacio en disco</li>
                            <li>Generar reporte semanal para gerencia</li>
                            <li>Automatizar reinicio de servicios problem√°ticos</li>
                        </ol>
                        <div class="mt-4 p-3 bg-green-900 bg-opacity-30 border-l-4 border-green-500 rounded">
                            <p class="text-green-300 text-sm"><strong>üéØ Meta:</strong> Crear script master que haga todo esto con un solo comando</p>
                        </div>
                        
                        <!-- Campo de Respuesta -->
                        <div class="mt-4">
                            <button class="response-btn" onclick="toggleResponse('response-caso1')" style="background-color: #bd93f9; color: #282a36; padding: 0.5rem 1rem; border: none; border-radius: 4px; font-weight: bold; cursor: pointer; transition: all 0.3s; text-shadow: none;">
                                üìù Respuesta
                            </button>
                            <div id="response-caso1" class="response-area mt-3" style="display: none;">
                                <textarea class="response-textarea" placeholder="Escribe aqu√≠ tu script master de administraci√≥n de servidores..."
                                    style="width: 100%; min-height: 200px; background-color: #282a36; color: #f8f8f2; border: 2px solid #bd93f9; border-radius: 6px; padding: 1rem; font-family: 'Fira Code', monospace; font-size: 0.9rem; resize: vertical; text-shadow: none;"></textarea>
                                <div class="mt-2 text-right">
                                    <button onclick="clearResponse('response-caso1')" style="background-color: #ff5555; color: #f8f8f2; padding: 0.25rem 0.75rem; border: none; border-radius: 4px; font-size: 0.8rem; cursor: pointer; margin-right: 0.5rem; text-shadow: none;">Limpiar</button>
                                    <button onclick="saveResponse('response-caso1')" style="background-color: #50fa7b; color: #282a36; padding: 0.25rem 0.75rem; border: none; border-radius: 4px; font-size: 0.8rem; cursor: pointer; text-shadow: none;">Guardar</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="exercise-container">
                    <h3 class="exercise-title">üõ°Ô∏è Caso 2: SOC (Security Operations Center)</h3>
                    <p><strong>Escenario:</strong> Analista de seguridad detectando amenazas 24/7.</p>
                    <div class="mt-4">
                        <h4 class="text-lg font-bold text-cyan-400 mb-2">Responsabilidades:</h4>
                        <ol class="list-decimal list-inside text-gray-300 space-y-2">
                            <li>Monitorear logs de seguridad en tiempo real</li>
                            <li>Detectar patrones de ataques de fuerza bruta</li>
                            <li>Identificar comunicaciones con C&C servers</li>
                            <li>Responder autom√°ticamente a incidentes nivel 1</li>
                            <li>Generar IOCs (Indicators of Compromise)</li>
                        </ol>
                        
                        <!-- Campo de Respuesta -->
                        <div class="mt-4">
                            <button class="response-btn" onclick="toggleResponse('response-caso2')" style="background-color: #bd93f9; color: #282a36; padding: 0.5rem 1rem; border: none; border-radius: 4px; font-weight: bold; cursor: pointer; transition: all 0.3s; text-shadow: none;">
                                üìù Respuesta
                            </button>
                            <div id="response-caso2" class="response-area mt-3" style="display: none;">
                                <textarea class="response-textarea" placeholder="Escribe aqu√≠ tu sistema de SOC para detecci√≥n de amenazas..."
                                    style="width: 100%; min-height: 180px; background-color: #282a36; color: #f8f8f2; border: 2px solid #bd93f9; border-radius: 6px; padding: 1rem; font-family: 'Fira Code', monospace; font-size: 0.9rem; resize: vertical; text-shadow: none;"></textarea>
                                <div class="mt-2 text-right">
                                    <button onclick="clearResponse('response-caso2')" style="background-color: #ff5555; color: #f8f8f2; padding: 0.25rem 0.75rem; border: none; border-radius: 4px; font-size: 0.8rem; cursor: pointer; margin-right: 0.5rem; text-shadow: none;">Limpiar</button>
                                    <button onclick="saveResponse('response-caso2')" style="background-color: #50fa7b; color: #282a36; padding: 0.25rem 0.75rem; border: none; border-radius: 4px; font-size: 0.8rem; cursor: pointer; text-shadow: none;">Guardar</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="exercise-container">
                    <h3 class="exercise-title">üîß Caso 3: Soporte T√©cnico Automatizado</h3>
                    <p><strong>Escenario:</strong> T√©cnico de soporte creando herramientas de autodiagn√≥stico.</p>
                    <div class="mt-4">
                        <h4 class="text-lg font-bold text-cyan-400 mb-2">Herramientas necesarias:</h4>
                        <ol class="list-decimal list-inside text-gray-300 space-y-2">
                            <li>Diagn√≥stico autom√°tico de problemas de red</li>
                            <li>Limpieza de archivos temporales y cach√©</li>
                            <li>Verificaci√≥n de integridad del sistema</li>
                            <li>Reparaci√≥n autom√°tica de servicios Windows</li>
                            <li>Reporte detallado para el usuario final</li>
                        </ol>
                        
                        <!-- Campo de Respuesta -->
                        <div class="mt-4">
                            <button class="response-btn" onclick="toggleResponse('response-caso3')" style="background-color: #bd93f9; color: #282a36; padding: 0.5rem 1rem; border: none; border-radius: 4px; font-weight: bold; cursor: pointer; transition: all 0.3s; text-shadow: none;">
                                üìù Respuesta
                            </button>
                            <div id="response-caso3" class="response-area mt-3" style="display: none;">
                                <textarea class="response-textarea" placeholder="Escribe aqu√≠ tu herramienta de soporte t√©cnico automatizado..."
                                    style="width: 100%; min-height: 160px; background-color: #282a36; color: #f8f8f2; border: 2px solid #bd93f9; border-radius: 6px; padding: 1rem; font-family: 'Fira Code', monospace; font-size: 0.9rem; resize: vertical; text-shadow: none;"></textarea>
                                <div class="mt-2 text-right">
                                    <button onclick="clearResponse('response-caso3')" style="background-color: #ff5555; color: #f8f8f2; padding: 0.25rem 0.75rem; border: none; border-radius: 4px; font-size: 0.8rem; cursor: pointer; margin-right: 0.5rem; text-shadow: none;">Limpiar</button>
                                    <button onclick="saveResponse('response-caso3')" style="background-color: #50fa7b; color: #282a36; padding: 0.25rem 0.75rem; border: none; border-radius: 4px; font-size: 0.8rem; cursor: pointer; text-shadow: none;">Guardar</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Proyectos Finales -->
        <section id="final-projects" class="mb-12">
            <h2 class="section-title">> M√≥dulo 6: Proyectos Capstone</h2>
            
            <div class="card">
                <div class="exercise-container">
                    <h3 class="exercise-title">üèÜ Proyecto Final 1: Mini-SIEM <span class="challenge-badge badge-expert">EXPERTO</span></h3>
                    <p><strong>Objetivo:</strong> Crear un sistema b√°sico de SIEM (Security Information and Event Management).</p>
                    <div class="mt-4">
                        <h4 class="text-lg font-bold text-cyan-400 mb-2">Componentes requeridos:</h4>
                        <ul class="list-disc list-inside text-gray-300 space-y-2">
                            <li>Collector: Recopilar logs de m√∫ltiples fuentes</li>
                            <li>Parser: Normalizar formatos de logs diferentes</li>
                            <li>Correlator: Detectar patrones de ataque</li>
                            <li>Alerter: Sistema de notificaciones</li>
                            <li>Dashboard: Interfaz web b√°sica para visualizaci√≥n</li>
                        </ul>
                        <div class="mt-4 p-3 bg-purple-900 bg-opacity-30 border-l-4 border-purple-500 rounded">
                            <p class="text-purple-300 text-sm"><strong>üöÄ Extra:</strong> Integra con APIs de threat intelligence</p>
                        </div>
                        
                        <!-- Campo de Respuesta -->
                        <div class="mt-4">
                            <button class="response-btn" onclick="toggleResponse('response-proyecto1')" style="background-color: #bd93f9; color: #282a36; padding: 0.5rem 1rem; border: none; border-radius: 4px; font-weight: bold; cursor: pointer; transition: all 0.3s; text-shadow: none;">
                                üìù Respuesta
                            </button>
                            <div id="response-proyecto1" class="response-area mt-3" style="display: none;">
                                <textarea class="response-textarea" placeholder="Dise√±a aqu√≠ tu sistema Mini-SIEM completo..."
                                    style="width: 100%; min-height: 220px; background-color: #282a36; color: #f8f8f2; border: 2px solid #bd93f9; border-radius: 6px; padding: 1rem; font-family: 'Fira Code', monospace; font-size: 0.9rem; resize: vertical; text-shadow: none;"></textarea>
                                <div class="mt-2 text-right">
                                    <button onclick="clearResponse('response-proyecto1')" style="background-color: #ff5555; color: #f8f8f2; padding: 0.25rem 0.75rem; border: none; border-radius: 4px; font-size: 0.8rem; cursor: pointer; margin-right: 0.5rem; text-shadow: none;">Limpiar</button>
                                    <button onclick="saveResponse('response-proyecto1')" style="background-color: #50fa7b; color: #282a36; padding: 0.25rem 0.75rem; border: none; border-radius: 4px; font-size: 0.8rem; cursor: pointer; text-shadow: none;">Guardar</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="exercise-container">
                    <h3 class="exercise-title">ü§ñ Proyecto Final 2: Asistente de Administraci√≥n IA <span class="challenge-badge badge-expert">EXPERTO</span></h3>
                    <p><strong>Objetivo:</strong> Chatbot inteligente para administraci√≥n de sistemas.</p>
                    <div class="mt-4">
                        <h4 class="text-lg font-bold text-cyan-400 mb-2">Funcionalidades:</h4>
                        <ul class="list-disc list-inside text-gray-300 space-y-2">
                            <li>Procesamiento de lenguaje natural para comandos</li>
                            <li>Ejecuci√≥n segura de tareas administrativas</li>
                            <li>Aprendizaje de patrones de uso</li>
                            <li>Sugerencias proactivas de mantenimiento</li>
                            <li>Integraci√≥n con sistemas de ticketing</li>
                        </ul>
                        
                        <!-- Campo de Respuesta -->
                        <div class="mt-4">
                            <button class="response-btn" onclick="toggleResponse('response-proyecto2')" style="background-color: #bd93f9; color: #282a36; padding: 0.5rem 1rem; border: none; border-radius: 4px; font-weight: bold; cursor: pointer; transition: all 0.3s; text-shadow: none;">
                                üìù Respuesta
                            </button>
                            <div id="response-proyecto2" class="response-area mt-3" style="display: none;">
                                <textarea class="response-textarea" placeholder="Desarrolla aqu√≠ tu Asistente de Administraci√≥n con IA..."
                                    style="width: 100%; min-height: 200px; background-color: #282a36; color: #f8f8f2; border: 2px solid #bd93f9; border-radius: 6px; padding: 1rem; font-family: 'Fira Code', monospace; font-size: 0.9rem; resize: vertical; text-shadow: none;"></textarea>
                                <div class="mt-2 text-right">
                                    <button onclick="clearResponse('response-proyecto2')" style="background-color: #ff5555; color: #f8f8f2; padding: 0.25rem 0.75rem; border: none; border-radius: 4px; font-size: 0.8rem; cursor: pointer; margin-right: 0.5rem; text-shadow: none;">Limpiar</button>
                                    <button onclick="saveResponse('response-proyecto2')" style="background-color: #50fa7b; color: #282a36; padding: 0.25rem 0.75rem; border: none; border-radius: 4px; font-size: 0.8rem; cursor: pointer; text-shadow: none;">Guardar</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Secci√≥n de Env√≠o de Respuestas -->
        <section id="submit-section" class="mb-12">
            <div class="card">
                <h2 class="section-title">> Terminal de Env√≠o de Respuestas</h2>
                <div class="mt-6 p-6 bg-gradient-to-r from-purple-900 to-blue-900 rounded-lg border-2 border-purple-500">
                    <div class="text-center mb-6">
                        <h3 class="text-2xl font-bold text-purple-300 mb-2">
                            üöÄ TRANSMISI√ìN DE DATOS AL COMANDO CENTRAL
                        </h3>
                        <p class="text-cyan-300">Env√≠a tus soluciones al dashboard del instructor para evaluaci√≥n</p>
                    </div>
                    
                    <div class="row">
                        <div class="col-md-6 mb-4">
                            <label class="form-label text-yellow-300 font-bold">
                                üë§ Identificaci√≥n del Operador:
                            </label>
                            <input type="text" id="studentName" class="form-control" 
                                   placeholder="Ingresa tu nombre completo"
                                   style="background-color: #282a36; color: #f8f8f2; border: 2px solid #bd93f9; border-radius: 6px; padding: 0.75rem; font-family: 'Fira Code', monospace;">
                        </div>
                        <div class="col-md-6 mb-4 d-flex align-items-end">
                            <button id="submitResponses" class="btn btn-lg w-100" 
                                    style="background: linear-gradient(45deg, #50fa7b, #8be9fd); color: #282a36; border: none; border-radius: 8px; font-weight: bold; padding: 0.75rem; text-shadow: none; font-family: 'Fira Code', monospace;">
                                üì° TRANSMITIR RESPUESTAS
                            </button>
                        </div>
                    </div>
                    
                    <div id="submitStatus" class="mt-4" style="display: none;">
                        <div class="alert alert-info border-0" style="background-color: rgba(139, 233, 253, 0.1); border-left: 4px solid #8be9fd !important;">
                            <div class="d-flex align-items-center">
                                <div class="spinner-border spinner-border-sm text-cyan me-2" role="status"></div>
                                <span class="text-cyan-300">Transmitiendo datos al comando central...</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="mt-4 p-3 bg-dark bg-opacity-50 rounded border-l-4 border-yellow-500">
                        <p class="text-yellow-300 text-sm mb-2">
                            <strong>‚ö†Ô∏è PROTOCOLO DE TRANSMISI√ìN:</strong>
                        </p>
                        <ul class="text-gray-300 text-sm list-disc list-inside space-y-1 mb-0">
                            <li>Solo se enviar√°n ejercicios con respuestas completadas</li>
                            <li>Puedes enviar m√∫ltiples veces para actualizar tus soluciones</li>
                            <li>El instructor recibir√° notificaci√≥n en tiempo real</li>
                            <li>Incluye timestamp y estad√≠sticas de progreso</li>
                        </ul>
                    </div>
                </div>
            </div>
        </section>

        <footer class="text-center mt-12 mb-6">
            <p class="text-sm text-gray-500">LABORATORIO PS-PR√ÅCTICAS COMPLETADO. OPERADOR CERTIFICADO.</p>
            <button class="mt-4 bg-green-600 hover:bg-green-700" data-bs-toggle="offcanvas" data-bs-target="#commandsReference">
                üìñ Consultar Arsenal de Comandos
            </button>
        </footer>

    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // Funci√≥n para copiar c√≥digo al portapapeles
        function initCodeCopyButtons() {
            const pres = document.querySelectorAll('pre');
            pres.forEach(pre => {
                const button = document.createElement('button');
                button.innerText = 'Copiar';
                button.className = 'absolute top-2 right-2 text-xs';
                button.style.fontSize = '0.75rem';
                pre.style.position = 'relative';
                pre.appendChild(button);

                button.addEventListener('click', () => {
                    const code = pre.cloneNode(true);
                    const buttonElement = code.querySelector('button');
                    if (buttonElement) {
                        code.removeChild(buttonElement);
                    }
                    const text = code.innerText || code.textContent;
                    
                    navigator.clipboard.writeText(text).then(() => {
                        button.innerText = '¬°Copiado!';
                        setTimeout(() => {
                            button.innerText = 'Copiar';
                        }, 2000);
                    }).catch(() => {
                        const el = document.createElement('textarea');
                        el.value = text;
                        document.body.appendChild(el);
                        el.select();
                        document.execCommand('copy');
                        document.body.removeChild(el);

                        button.innerText = '¬°Copiado!';
                        setTimeout(() => {
                            button.innerText = 'Copiar';
                        }, 2000);
                    });
                });
            });
        }

        // Funci√≥n para agregar n√∫meros de l√≠nea a bloques de c√≥digo
        function addLineNumbers() {
            const pres = document.querySelectorAll('pre');
            pres.forEach(pre => {
                const lines = pre.innerHTML.split('\n');
                if (lines.length > 3) {
                    const numberedLines = lines.map((line, index) => {
                        if (index === 0) return line;
                        return `<span class="line-number" style="color: #6272a4; margin-right: 1rem; user-select: none;">${index.toString().padStart(2, '0')}</span>${line}`;
                    });
                    pre.innerHTML = numberedLines.join('\n');
                }
            });
        }

        // Efectos de animaci√≥n para las cards
        function initCardAnimations() {
            const cards = document.querySelectorAll('.card');
            
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.style.animation = 'slideInUp 0.6s ease-out';
                    }
                });
            }, { threshold: 0.1 });

            cards.forEach(card => {
                observer.observe(card);
            });
        }

        // Agregar animaci√≥n CSS
        const style = document.createElement('style');
        style.textContent = `
            @keyframes slideInUp {
                from {
                    opacity: 0;
                    transform: translateY(30px);
                }
                to {
                    opacity: 1;
                    transform: translateY(0);
                }
            }
        `;
        document.head.appendChild(style);

        // Inicializar funciones cuando carga la p√°gina
        document.addEventListener('DOMContentLoaded', () => {
            initCodeCopyButtons();
            initCardAnimations();
            loadSavedResponses();
            
            // Mensaje de bienvenida en consola
            console.log(`
üöÄ LABORATORIO PS-PR√ÅCTICAS INICIADO
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
üìñ Arsenal de comandos disponible
üéØ ${document.querySelectorAll('.exercise-container').length} ejercicios cargados
üíæ ${document.querySelectorAll('.response-area').length} campos de respuesta disponibles
üíª Sistema operativo detectado: ${navigator.platform}
‚ö° ¬°Comienza tu entrenamiento!
            `);
        });

        // Funci√≥n para navegaci√≥n por categor√≠as en el offcanvas
        function scrollToCategory(categoryId) {
            const category = document.getElementById(categoryId);
            if (category) {
                category.scrollIntoView({ 
                    behavior: 'smooth', 
                    block: 'start' 
                });
                
                // Efecto visual de highlight
                category.style.background = 'rgba(189, 147, 249, 0.2)';
                category.style.transition = 'background 0.5s ease';
                
                setTimeout(() => {
                    category.style.background = 'transparent';
                }, 1500);
            }
        }

        // Funci√≥n para tracking de progreso (opcional)
        function trackProgress(exerciseId) {
            const completed = JSON.parse(localStorage.getItem('ps-exercises-completed') || '[]');
            if (!completed.includes(exerciseId)) {
                completed.push(exerciseId);
                localStorage.setItem('ps-exercises-completed', JSON.stringify(completed));
                
                // Mostrar notificaci√≥n de progreso
                const toast = document.createElement('div');
                toast.className = 'position-fixed top-0 end-0 m-3 p-3 bg-success text-white rounded';
                toast.style.zIndex = '9999';
                toast.innerHTML = `‚úÖ Ejercicio ${exerciseId} completado!`;
                document.body.appendChild(toast);
                
                setTimeout(() => {
                    toast.remove();
                }, 3000);
            }
        }

        // Funci√≥n de b√∫squeda r√°pida en el arsenal
        function searchCommands() {
            const searchTerm = document.getElementById('command-search').value.toLowerCase();
            const cmdItems = document.querySelectorAll('.cmd-item');
            
            cmdItems.forEach(item => {
                const name = item.querySelector('.cmd-name').textContent.toLowerCase();
                const description = item.querySelector('.cmd-description').textContent.toLowerCase();
                const syntax = item.querySelector('.cmd-syntax').textContent.toLowerCase();
                
                if (name.includes(searchTerm) || description.includes(searchTerm) || syntax.includes(searchTerm)) {
                    item.style.display = 'block';
                    if (searchTerm) {
                        item.style.border = '2px solid #50fa7b';
                    } else {
                        item.style.border = '1px solid #bd93f9';
                    }
                } else {
                    item.style.display = searchTerm ? 'none' : 'block';
                    item.style.border = '1px solid #bd93f9';
                }
            });
        }

        // Funciones para manejo de campos de respuesta
        function toggleResponse(responseId) {
            const responseArea = document.getElementById(responseId);
            const button = document.querySelector(`[onclick="toggleResponse('${responseId}')"]`);
            
            if (responseArea.style.display === 'none' || responseArea.style.display === '') {
                responseArea.style.display = 'block';
                responseArea.style.animation = 'slideDown 0.3s ease-out';
                button.innerHTML = 'üìù Ocultar Respuesta';
                button.style.backgroundColor = '#ff79c6';
                
                // Auto-focus en el textarea
                const textarea = responseArea.querySelector('textarea');
                setTimeout(() => textarea.focus(), 100);
            } else {
                responseArea.style.display = 'none';
                button.innerHTML = 'üìù Respuesta';
                button.style.backgroundColor = '#bd93f9';
            }
        }

        function clearResponse(responseId) {
            const textarea = document.querySelector(`#${responseId} textarea`);
            if (confirm('¬øEst√°s seguro de que quieres limpiar tu respuesta?')) {
                textarea.value = '';
                textarea.focus();
                
                // Efecto visual de limpieza
                textarea.style.borderColor = '#ff5555';
                setTimeout(() => {
                    textarea.style.borderColor = '#bd93f9';
                }, 500);
            }
        }

        function saveResponse(responseId) {
            const textarea = document.querySelector(`#${responseId} textarea`);
            const content = textarea.value.trim();
            
            if (content === '') {
                alert('‚ùå No hay contenido para guardar');
                return;
            }
            
            // Guardar en localStorage
            const storageKey = `powershell-exercise-${responseId}`;
            localStorage.setItem(storageKey, content);
            
            // Efecto visual de guardado
            textarea.style.borderColor = '#50fa7b';
            const saveButton = document.querySelector(`[onclick="saveResponse('${responseId}')"]`);
            const originalText = saveButton.innerHTML;
            saveButton.innerHTML = '‚úÖ Guardado';
            saveButton.style.backgroundColor = '#50fa7b';
            
            setTimeout(() => {
                textarea.style.borderColor = '#bd93f9';
                saveButton.innerHTML = originalText;
                saveButton.style.backgroundColor = '#50fa7b';
            }, 2000);
            
            // Mostrar notificaci√≥n
            showNotification('üíæ Respuesta guardada localmente', 'success');
        }

        function loadSavedResponses() {
            // Cargar respuestas guardadas al cargar la p√°gina
            const responseAreas = document.querySelectorAll('.response-area');
            responseAreas.forEach(area => {
                const responseId = area.id;
                const storageKey = `powershell-exercise-${responseId}`;
                const savedContent = localStorage.getItem(storageKey);
                
                if (savedContent) {
                    const textarea = area.querySelector('textarea');
                    textarea.value = savedContent;
                    
                    // Indicador visual de contenido guardado
                    textarea.style.borderColor = '#f1fa8c';
                    setTimeout(() => {
                        textarea.style.borderColor = '#bd93f9';
                    }, 1000);
                }
            });
        }

        function showNotification(message, type = 'info') {
            const notification = document.createElement('div');
            notification.className = `position-fixed top-0 end-0 m-3 p-3 rounded shadow-lg`;
            notification.style.zIndex = '9999';
            notification.style.minWidth = '300px';
            
            switch(type) {
                case 'success':
                    notification.style.backgroundColor = '#50fa7b';
                    notification.style.color = '#282a36';
                    break;
                case 'error':
                    notification.style.backgroundColor = '#ff5555';
                    notification.style.color = '#f8f8f2';
                    break;
                default:
                    notification.style.backgroundColor = '#bd93f9';
                    notification.style.color = '#282a36';
            }
            
            notification.innerHTML = `
                <div class="d-flex justify-content-between align-items-center">
                    <span class="fw-bold">${message}</span>
                    <button class="btn-close btn-close-white ms-2" onclick="this.parentElement.parentElement.remove()"></button>
                </div>
            `;
            
            document.body.appendChild(notification);
            
            // Auto-eliminar despu√©s de 4 segundos
            setTimeout(() => {
                if (notification.parentElement) {
                    notification.remove();
                }
            }, 4000);
        }

        // Agregar animaci√≥n CSS para slideDown
        const additionalStyles = document.createElement('style');
        additionalStyles.textContent = `
            @keyframes slideDown {
                from {
                    opacity: 0;
                    max-height: 0;
                    transform: translateY(-10px);
                }
                to {
                    opacity: 1;
                    max-height: 500px;
                    transform: translateY(0);
                }
            }
            
            .response-btn:hover {
                background-color: #ff79c6 !important;
                transform: translateY(-2px);
                box-shadow: 0 4px 8px rgba(189, 147, 249, 0.3);
            }
            
            .response-textarea:focus {
                border-color: #50fa7b !important;
                box-shadow: 0 0 15px rgba(80, 250, 123, 0.3);
                outline: none;
            }
            
            .response-area {
                border-left: 3px solid #bd93f9;
                padding-left: 1rem;
                margin-left: 0.5rem;
            }
        `;
        document.head.appendChild(additionalStyles);

        // ==================== FUNCIONALIDAD DE ENV√çO DE RESPUESTAS ====================
        
        // Inicializar Socket.IO
        let socket;
        
        function initializeSocket() {
            try {
                socket = io();
                console.log('üîó Socket.IO conectado para env√≠o de respuestas');
                
                socket.on('connect', () => {
                    console.log('‚úÖ Conexi√≥n socket establecida');
                });
                
                socket.on('disconnect', () => {
                    console.log('‚ùå Conexi√≥n socket perdida');
                });
                
            } catch (error) {
                console.warn('‚ö†Ô∏è Socket.IO no disponible:', error);
            }
        }
        
        function collectAllResponses() {
            const responses = {};
            const responseAreas = document.querySelectorAll('.response-area');
            let completedResponses = 0;
            
            responseAreas.forEach(area => {
                const responseId = area.id;
                const textarea = area.querySelector('textarea');
                const content = textarea.value.trim();
                
                if (content) {
                    // Determinar tipo de ejercicio basado en el ID
                    let exerciseInfo = getExerciseInfo(responseId);
                    
                    responses[responseId] = {
                        content: content,
                        exerciseType: exerciseInfo.type,
                        exerciseTitle: exerciseInfo.title,
                        exerciseLevel: exerciseInfo.level,
                        timestamp: new Date().toISOString(),
                        characterCount: content.length,
                        lineCount: content.split('\n').length
                    };
                    completedResponses++;
                }
            });
            
            return {
                responses: responses,
                totalExercises: responseAreas.length,
                completedResponses: completedResponses,
                completionPercentage: Math.round((completedResponses / responseAreas.length) * 100)
            };
        }
        
        function getExerciseInfo(responseId) {
            const exerciseMap = {
                'response-1': { type: 'Procesos', title: 'Cazador de Recursos', level: 'F√°cil' },
                'response-2': { type: 'Procesos', title: 'Terminador Selectivo', level: 'Medio' },
                'response-3': { type: 'Procesos', title: 'Monitor en Tiempo Real', level: 'Dif√≠cil' },
                'response-4': { type: 'Servicios', title: 'Auditor de Servicios', level: 'F√°cil' },
                'response-5': { type: 'Servicios', title: 'Gestor de Servicios Autom√°tico', level: 'Medio' },
                'response-6': { type: 'Servicios', title: 'Detector de Servicios Maliciosos', level: 'Experto' },
                'response-7': { type: 'Red', title: 'Scanner de Puertos B√°sico', level: 'Medio' },
                'response-8': { type: 'Red', title: 'Detective de Conexiones', level: 'Dif√≠cil' },
                'response-9': { type: 'Seguridad', title: 'Forense de Archivos', level: 'Medio' },
                'response-10': { type: 'Seguridad', title: 'Centro de Respuesta a Incidentes', level: 'Experto' },
                'response-caso1': { type: 'Caso Real', title: 'Administraci√≥n de Servidores', level: 'Profesional' },
                'response-caso2': { type: 'Caso Real', title: 'SOC (Security Operations Center)', level: 'Profesional' },
                'response-caso3': { type: 'Caso Real', title: 'Soporte T√©cnico Automatizado', level: 'Profesional' },
                'response-proyecto1': { type: 'Proyecto Final', title: 'Mini-SIEM', level: 'Experto' },
                'response-proyecto2': { type: 'Proyecto Final', title: 'Asistente de Administraci√≥n IA', level: 'Experto' }
            };
            
            return exerciseMap[responseId] || { type: 'Ejercicio', title: 'Ejercicio Personalizado', level: 'Medio' };
        }
        
        function submitResponses() {
            const studentName = document.getElementById('studentName').value.trim();
            
            if (!studentName) {
                showNotification('‚ùå Debes ingresar tu nombre para enviar las respuestas', 'error');
                document.getElementById('studentName').focus();
                return;
            }
            
            const responseData = collectAllResponses();
            
            if (responseData.completedResponses === 0) {
                showNotification('‚ùå No hay respuestas completadas para enviar', 'error');
                return;
            }
            
            // Mostrar estado de env√≠o
            document.getElementById('submitStatus').style.display = 'block';
            document.getElementById('submitResponses').disabled = true;
            
            const submissionData = {
                student: studentName,
                lesson: 'PowerShell Pr√°cticas Avanzadas',
                lessonType: 'practicas',
                responses: responseData.responses,
                statistics: {
                    totalExercises: responseData.totalExercises,
                    completedResponses: responseData.completedResponses,
                    completionPercentage: responseData.completionPercentage,
                    submissionTime: new Date().toISOString(),
                    totalCharacters: Object.values(responseData.responses).reduce((sum, r) => sum + r.characterCount, 0),
                    averageResponseLength: Math.round(Object.values(responseData.responses).reduce((sum, r) => sum + r.characterCount, 0) / responseData.completedResponses)
                },
                timestamp: new Date().toISOString()
            };
            
            console.log('üì§ Enviando respuestas:', submissionData);
            
            // Emitir evento a trav√©s de Socket.IO
            if (socket && socket.connected) {
                socket.emit('lesson:exercises:submitted', submissionData);
                
                setTimeout(() => {
                    document.getElementById('submitStatus').style.display = 'none';
                    document.getElementById('submitResponses').disabled = false;
                    
                    showNotification(`‚úÖ Respuestas enviadas exitosamente! (${responseData.completedResponses}/${responseData.totalExercises} ejercicios)`, 'success');
                    
                    // Guardar timestamp del √∫ltimo env√≠o
                    localStorage.setItem('last-submission', JSON.stringify({
                        studentName: studentName,
                        timestamp: new Date().toISOString(),
                        exerciseCount: responseData.completedResponses
                    }));
                    
                }, 1500);
            } else {
                document.getElementById('submitStatus').style.display = 'none';
                document.getElementById('submitResponses').disabled = false;
                showNotification('‚ùå Error de conexi√≥n. Verifica tu conexi√≥n a internet.', 'error');
            }
        }
        
        function loadLastSubmission() {
            const lastSubmission = localStorage.getItem('last-submission');
            if (lastSubmission) {
                try {
                    const data = JSON.parse(lastSubmission);
                    document.getElementById('studentName').value = data.studentName;
                    
                    const lastDate = new Date(data.timestamp).toLocaleString();
                    showNotification(`üíæ √öltima transmisi√≥n: ${lastDate} (${data.exerciseCount} ejercicios)`, 'info');
                } catch (error) {
                    console.warn('Error loading last submission:', error);
                }
            }
        }
        
        // Agregar estilos adicionales para el env√≠o
        const submitStyles = document.createElement('style');
        submitStyles.textContent = `
            #submitResponses:hover {
                background: linear-gradient(45deg, #8be9fd, #50fa7b) !important;
                transform: translateY(-2px);
                box-shadow: 0 6px 20px rgba(80, 250, 123, 0.4);
            }
            
            #submitResponses:disabled {
                opacity: 0.6;
                cursor: not-allowed;
                transform: none !important;
                box-shadow: none !important;
            }
            
            #studentName:focus {
                border-color: #50fa7b !important;
                box-shadow: 0 0 15px rgba(80, 250, 123, 0.3);
                outline: none;
            }
            
            .submission-summary {
                background: linear-gradient(135deg, rgba(139, 233, 253, 0.1), rgba(80, 250, 123, 0.1));
                border: 1px solid #8be9fd;
                border-radius: 8px;
                padding: 1rem;
                margin-top: 1rem;
            }
        `;
        document.head.appendChild(submitStyles);
    </script>
    
    <!-- Script para Socket.IO -->
    <script src="https://cdn.socket.io/4.7.2/socket.io.min.js"></script>
    <script>
        // Event listeners para la funcionalidad de env√≠o
        document.addEventListener('DOMContentLoaded', () => {
            // Inicializar socket despu√©s de que se carga la p√°gina
            setTimeout(() => {
                initializeSocket();
                loadLastSubmission();
            }, 1000);
            
            // Event listener para el bot√≥n de env√≠o
            document.getElementById('submitResponses').addEventListener('click', submitResponses);
            
            // Enter en el campo de nombre para enviar
            document.getElementById('studentName').addEventListener('keypress', (e) => {
                if (e.key === 'Enter') {
                    submitResponses();
                }
            });
            
            // Actualizar mensaje de consola
            const originalLog = console.log;
            console.log = function(...args) {
                originalLog.apply(console, args);
                if (args[0] && args[0].includes('LABORATORIO PS-PR√ÅCTICAS INICIADO')) {
                    originalLog(`
üì° SISTEMA DE TRANSMISI√ìN ACTIVADO
‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
üîó Socket.IO habilitado para env√≠o de respuestas
üë§ Ingresa tu nombre para identificarte
üì§ Env√≠a tus soluciones al comando central
                    `);
                }
            };
        });
    </script>
</body>
</html> 